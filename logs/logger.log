2024-03-13 00:18:50,155 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:18:50,158 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:18:50,161 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:22:10,197 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:22:10,200 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:22:10,684 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:22:10,727 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
2024-03-13 00:22:11,080 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:22:11,086 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:22:11,087 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:22:11,087 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:22:11,139 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:22:11,139 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 909 ms
2024-03-13 00:22:11,243 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:22:11,275 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:22:11,380 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:22:11,460 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:22:11,463 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:22:11,678 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:22:11,680 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:22:11,719 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:22:12,221 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:22:12,227 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:22:12,370 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:22:12,428 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:22:12,476 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:22:12,510 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:22:12,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:22:12,701 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4dc16fc9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1028a747, org.springframework.security.web.context.SecurityContextHolderFilter@7ec75228, org.springframework.security.web.header.HeaderWriterFilter@3c1d6ef0, org.springframework.security.web.authentication.logout.LogoutFilter@3f919230, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@eda7dd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@8de8b07, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6c6c93f8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24890021, org.springframework.security.web.session.SessionManagementFilter@96448ee, org.springframework.security.web.access.ExceptionTranslationFilter@35217e0, org.springframework.security.web.access.intercept.AuthorizationFilter@1e487d57]
2024-03-13 00:22:12,803 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:22:12,842 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:22:12,854 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:22:12,859 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.936 seconds (process running for 3.528)
2024-03-13 00:22:36,357 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:22:36,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:22:36,359 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 00:22:36,365 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /posts/100
2024-03-13 00:22:36,847 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:22:36,848 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:22:36,857 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /posts/100
2024-03-13 00:22:36,868 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 00:22:36,872 INFO r.k.v.c.PostController [http-nio-8080-exec-2] GET request for post with id 100
2024-03-13 00:22:36,885 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 00:22:36,888 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Get post with id 100
2024-03-13 00:22:36,888 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/100
2024-03-13 00:22:45,186 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /posts/100
2024-03-13 00:22:45,446 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:22:45,446 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:45,448 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:22:45,450 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:22:45,452 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:22:48,900 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:22:49,161 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:22:49,162 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:49,163 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:22:49,163 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /error
2024-03-13 00:22:49,164 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:22:52,327 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /albums/100
2024-03-13 00:22:52,588 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:22:52,589 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:52,590 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:22:52,590 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /error
2024-03-13 00:22:52,591 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:23:01,954 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:23:01,955 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:23:01,959 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:23:13,727 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 23644 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:23:13,729 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:23:14,144 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:23:14,184 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:23:14,534 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:23:14,540 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:23:14,541 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:23:14,541 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:23:14,593 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:23:14,594 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 834 ms
2024-03-13 00:23:14,700 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:23:14,731 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:23:14,834 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:23:14,914 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:23:14,917 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:23:15,136 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:23:15,138 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:23:15,180 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:23:15,694 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:23:15,700 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:23:15,843 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:23:15,911 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:23:15,956 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:23:16,007 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:23:16,075 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:23:16,222 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fe37d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1718de70, org.springframework.security.web.context.SecurityContextHolderFilter@4d359c69, org.springframework.security.web.header.HeaderWriterFilter@74ed7111, org.springframework.security.web.authentication.logout.LogoutFilter@35217e0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6c6c93f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71dfca65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c770b57, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bfc5296, org.springframework.security.web.session.SessionManagementFilter@43c3354, org.springframework.security.web.access.ExceptionTranslationFilter@45a05350, org.springframework.security.web.access.intercept.AuthorizationFilter@3f1d4ecf]
2024-03-13 00:23:16,337 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:23:16,374 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:23:16,390 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:23:16,395 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.909 seconds (process running for 3.44)
2024-03-13 00:23:17,753 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:23:17,753 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:23:17,754 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:23:17,759 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:23:18,198 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:23:18,199 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:23:18,210 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:23:18,212 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:23:18,214 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:23:19,414 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:23:19,676 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:23:19,676 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:23:19,677 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:23:19,678 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:23:19,679 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:24:36,040 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /albums/100
2024-03-13 00:24:36,303 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:24:36,303 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_VIEWER]]
2024-03-13 00:24:36,304 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-6] Responding with 403 status code
2024-03-13 00:24:36,304 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /error
2024-03-13 00:24:36,305 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured GET /error
2024-03-13 00:25:38,510 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:25:38,512 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:25:38,517 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:25:43,286 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 24264 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:25:43,289 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:25:43,719 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:25:43,759 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:25:44,103 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:25:44,108 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:25:44,109 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:25:44,109 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:25:44,168 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:25:44,169 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 848 ms
2024-03-13 00:25:44,267 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:25:44,296 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:25:44,399 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:25:44,479 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:25:44,482 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:25:44,695 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 00:25:44,698 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:25:44,736 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:25:45,222 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:25:45,228 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:25:45,368 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:25:45,434 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:25:45,477 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:25:45,507 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:25:45,565 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:25:45,697 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33997e07, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@639bf405, org.springframework.security.web.context.SecurityContextHolderFilter@6164b3a2, org.springframework.security.web.header.HeaderWriterFilter@589a4305, org.springframework.security.web.authentication.logout.LogoutFilter@5b3c2a9f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@69e736bf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@96448ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@55cf5626, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eda7dd3, org.springframework.security.web.session.SessionManagementFilter@3f1d4ecf, org.springframework.security.web.access.ExceptionTranslationFilter@1828ab51, org.springframework.security.web.access.intercept.AuthorizationFilter@54c17a2b]
2024-03-13 00:25:45,803 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:25:45,839 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:25:45,851 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:25:45,856 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.817 seconds (process running for 3.341)
2024-03-13 00:26:00,353 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:26:00,354 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:26:00,359 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:26:04,274 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19856 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:26:04,277 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:26:04,709 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:26:04,749 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:26:05,091 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:26:05,097 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:26:05,098 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:26:05,098 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:26:05,162 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:26:05,162 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 856 ms
2024-03-13 00:26:05,261 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:26:05,292 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:26:05,395 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:26:05,474 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:26:05,477 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:26:05,688 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:26:05,690 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:26:05,730 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:26:06,217 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:26:06,223 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:26:06,361 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:26:06,420 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:26:06,463 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:26:06,497 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:26:06,568 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:26:06,697 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@27422187, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7205a8b7, org.springframework.security.web.context.SecurityContextHolderFilter@3fc7abf6, org.springframework.security.web.header.HeaderWriterFilter@341c0dfc, org.springframework.security.web.authentication.logout.LogoutFilter@54c17a2b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1028a747, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c6c93f8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1718de70, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1ee126de, org.springframework.security.web.session.SessionManagementFilter@55cf5626, org.springframework.security.web.access.ExceptionTranslationFilter@3dd27116, org.springframework.security.web.access.intercept.AuthorizationFilter@304704ae]
2024-03-13 00:26:06,800 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:26:06,837 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:26:06,849 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:26:06,853 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.837 seconds (process running for 3.406)
2024-03-13 00:26:17,540 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:26:17,541 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:26:17,542 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:26:17,547 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:26:17,985 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:26:17,986 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:26:17,997 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:26:18,001 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:26:18,003 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /error
2024-03-13 00:26:21,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:26:21,276 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:26:21,277 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:26:21,278 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:26:21,278 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:26:21,280 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:27:06,611 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:27:06,871 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:27:06,871 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:27:06,871 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/100
2024-03-13 00:27:06,876 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:06,892 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:27:06,896 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:27:07,131 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:27:29,210 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:27:29,212 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:27:29,215 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:27:32,768 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 16348 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:27:32,770 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:27:33,195 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:27:33,237 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:27:33,589 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:27:33,662 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:27:33,663 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 860 ms
2024-03-13 00:27:33,764 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:27:33,794 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:27:33,898 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:27:33,981 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:27:33,984 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:27:34,198 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:27:34,199 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:27:34,238 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:27:34,726 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:27:34,731 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:27:34,878 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:27:34,941 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:34,986 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:27:35,025 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:27:35,079 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:27:35,205 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1da61a29, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47cf922d, org.springframework.security.web.context.SecurityContextHolderFilter@c770b57, org.springframework.security.web.header.HeaderWriterFilter@2daa5092, org.springframework.security.web.authentication.logout.LogoutFilter@341c0dfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41736818, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55731ccd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@565030b7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b64921f, org.springframework.security.web.session.SessionManagementFilter@7fa86ddd, org.springframework.security.web.access.ExceptionTranslationFilter@5478597, org.springframework.security.web.access.intercept.AuthorizationFilter@59509393]
2024-03-13 00:27:35,336 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:27:35,372 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:27:35,384 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:27:35,388 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.874 seconds (process running for 3.403)
2024-03-13 00:27:40,363 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:27:40,363 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:27:40,364 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:27:40,368 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:27:40,802 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:27:40,803 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:27:40,813 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:27:40,816 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:27:40,818 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /error
2024-03-13 00:27:48,016 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:27:48,291 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:27:48,292 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:27:48,292 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:27:48,295 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:48,314 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:27:48,316 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:27:48,541 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:28:06,814 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing DELETE /albums/100
2024-03-13 00:28:07,081 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:28:07,081 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:28:07,082 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured DELETE /albums/100
2024-03-13 00:28:07,083 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] DELETE request for Album with id 100
2024-03-13 00:28:07,085 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Delete album with id 100
2024-03-13 00:28:07,085 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:28:58,082 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:28:58,085 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:28:58,088 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:29:01,717 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 16232 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:29:01,720 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:29:02,157 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:29:02,195 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 33 ms. Found 2 JPA repository interfaces.
2024-03-13 00:29:02,543 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:29:02,548 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:02,549 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:29:02,549 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:29:02,602 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:29:02,602 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 850 ms
2024-03-13 00:29:02,700 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:29:02,729 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:29:02,835 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:29:02,913 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:29:02,917 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:29:03,129 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:29:03,130 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:29:03,169 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:29:03,651 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:29:03,657 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:03,795 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:29:03,849 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:03,896 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:29:03,931 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:29:03,990 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:29:04,120 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fe37d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1718de70, org.springframework.security.web.context.SecurityContextHolderFilter@4d359c69, org.springframework.security.web.header.HeaderWriterFilter@74ed7111, org.springframework.security.web.authentication.logout.LogoutFilter@35217e0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6c6c93f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71dfca65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c770b57, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bfc5296, org.springframework.security.web.session.SessionManagementFilter@43c3354, org.springframework.security.web.access.ExceptionTranslationFilter@45a05350, org.springframework.security.web.access.intercept.AuthorizationFilter@3f1d4ecf]
2024-03-13 00:29:04,227 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:29:04,267 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:04,279 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:29:04,284 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.823 seconds (process running for 3.366)
2024-03-13 00:29:11,356 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:29:11,356 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:29:11,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:29:11,361 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/100
2024-03-13 00:29:11,807 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:29:11,808 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:11,818 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:29:11,820 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:29:11,822 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:29:19,350 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:19,351 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:29:19,357 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:29:23,283 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21836 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:29:23,285 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:29:23,735 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:29:23,779 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
2024-03-13 00:29:24,131 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:29:24,136 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:24,136 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:29:24,138 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:29:24,200 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:29:24,200 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 876 ms
2024-03-13 00:29:24,302 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:29:24,334 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:29:24,436 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:29:24,520 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:29:24,524 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:29:24,739 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:29:24,740 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:29:24,778 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:29:25,325 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:29:25,331 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:25,473 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:29:25,527 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:25,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:29:25,606 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:29:25,663 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:29:25,788 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b64921f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@439d649c, org.springframework.security.web.context.SecurityContextHolderFilter@55731ccd, org.springframework.security.web.header.HeaderWriterFilter@66e62e19, org.springframework.security.web.authentication.logout.LogoutFilter@507fecf3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@144792d5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41935a9d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2eb31735, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e475994, org.springframework.security.web.session.SessionManagementFilter@3f465ae, org.springframework.security.web.access.ExceptionTranslationFilter@2daa5092, org.springframework.security.web.access.intercept.AuthorizationFilter@7ec75228]
2024-03-13 00:29:25,896 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:29:25,932 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:25,943 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:29:25,948 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.908 seconds (process running for 3.456)
2024-03-13 00:29:26,197 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:29:26,197 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:29:26,198 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:29:26,203 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/100
2024-03-13 00:29:26,646 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:29:26,647 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:26,656 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:29:26,660 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:29:26,661 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:29:35,145 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:29:35,410 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:29:35,411 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:35,412 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:29:35,414 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:35,431 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:29:35,433 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:29:35,667 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:29:38,917 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:29:39,188 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:29:39,189 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:29:39,189 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:29:39,190 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /error
2024-03-13 00:29:39,191 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /error
2024-03-13 00:30:06,324 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /albums/100
2024-03-13 00:30:06,588 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:30:06,588 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:30:06,589 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:30:06,589 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /error
2024-03-13 00:30:06,590 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured GET /error
2024-03-13 00:30:17,546 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:17,547 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:30:17,552 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:30:21,306 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 14172 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:30:21,308 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:30:21,729 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:30:21,770 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:30:22,110 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:30:22,115 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:22,115 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:30:22,117 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:30:22,170 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:30:22,170 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 829 ms
2024-03-13 00:30:22,279 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:30:22,310 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:30:22,417 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:30:22,497 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:30:22,500 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:30:22,707 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:30:22,709 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:30:22,747 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:30:23,264 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:30:23,270 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:23,415 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:30:23,476 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:23,521 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:30:23,551 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:30:23,604 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:30:23,759 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1da61a29, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47cf922d, org.springframework.security.web.context.SecurityContextHolderFilter@c770b57, org.springframework.security.web.header.HeaderWriterFilter@2daa5092, org.springframework.security.web.authentication.logout.LogoutFilter@341c0dfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41736818, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55731ccd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@565030b7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b64921f, org.springframework.security.web.session.SessionManagementFilter@7fa86ddd, org.springframework.security.web.access.ExceptionTranslationFilter@5478597, org.springframework.security.web.access.intercept.AuthorizationFilter@59509393]
2024-03-13 00:30:23,868 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:30:23,904 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:23,923 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:30:23,927 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.862 seconds (process running for 3.391)
2024-03-13 00:30:25,165 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:30:25,165 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:30:25,166 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2024-03-13 00:30:25,171 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:30:25,634 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:30:25,635 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:30:25,643 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:30:25,653 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:25,673 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:30:25,676 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:30:25,939 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:30:40,006 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:30:40,268 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:30:40,269 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:40,270 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:30:40,272 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:30:40,275 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:30:42,898 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:42,900 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:30:42,904 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:30:46,499 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21272 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:30:46,501 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:30:46,986 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:30:47,032 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.
2024-03-13 00:30:47,370 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:30:47,376 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:47,376 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:30:47,377 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:30:47,431 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:30:47,431 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 896 ms
2024-03-13 00:30:47,532 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:30:47,567 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:30:47,683 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:30:47,769 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:30:47,772 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:30:47,985 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:30:47,987 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:30:48,037 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:30:48,533 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:30:48,539 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:48,676 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:30:48,728 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:48,778 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:30:48,809 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:30:48,873 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:30:49,007 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24890021, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@613ba54e, org.springframework.security.web.context.SecurityContextHolderFilter@8de8b07, org.springframework.security.web.header.HeaderWriterFilter@3dd27116, org.springframework.security.web.authentication.logout.LogoutFilter@21251e43, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@71c69628, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fc7abf6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a720ae3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27422187, org.springframework.security.web.session.SessionManagementFilter@1d6dc2b8, org.springframework.security.web.access.ExceptionTranslationFilter@3c1d6ef0, org.springframework.security.web.access.intercept.AuthorizationFilter@66c32e15]
2024-03-13 00:30:49,110 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:30:49,149 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:49,160 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:30:49,164 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.907 seconds (process running for 3.473)
2024-03-13 00:30:53,269 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:30:53,270 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:30:53,271 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:30:53,276 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:30:53,727 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:30:53,728 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:53,737 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:30:53,747 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:53,763 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:30:53,765 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:30:54,003 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:30:58,107 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /albums/100
2024-03-13 00:30:58,370 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:30:58,371 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:58,372 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:30:58,374 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /error
2024-03-13 00:30:58,376 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /error
2024-03-13 00:31:01,324 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:31:01,587 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:31:01,587 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:01,587 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/100
2024-03-13 00:31:04,433 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /posts/-20
2024-03-13 00:31:04,700 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:31:04,700 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:31:04,701 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /posts/-20
2024-03-13 00:31:04,703 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 00:31:04,704 INFO r.k.v.c.PostController [http-nio-8080-exec-5] DELETE request for post with id -20
2024-03-13 00:31:04,705 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 00:31:04,705 INFO r.k.v.s.PostService [http-nio-8080-exec-5] Get post with id -20
2024-03-13 00:31:04,705 INFO r.k.v.s.PostService [http-nio-8080-exec-5] Send POST request to :https://jsonplaceholder.typicode.com/posts/-20
2024-03-13 00:31:04,828 ERROR r.k.v.s.PostService [http-nio-8080-exec-5] Error while searching for post with id -20: 404 Not Found: "{}"
2024-03-13 00:31:09,878 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /posts/20
2024-03-13 00:31:10,144 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:31:10,145 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:31:10,146 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /posts/20
2024-03-13 00:31:10,147 INFO r.k.v.c.PostController [http-nio-8080-exec-6] DELETE request for post with id 20
2024-03-13 00:31:10,147 INFO r.k.v.s.PostService [http-nio-8080-exec-6] Get post with id 20
2024-03-13 00:31:10,147 INFO r.k.v.s.PostService [http-nio-8080-exec-6] Send POST request to :https://jsonplaceholder.typicode.com/posts/20
2024-03-13 00:31:10,244 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Delete post with id 20
2024-03-13 00:31:10,244 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Send DELETE request to :https://jsonplaceholder.typicode.com/posts/20
2024-03-13 00:31:16,371 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing GET /albums/20
2024-03-13 00:31:16,631 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 00:31:16,632 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:16,633 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured GET /albums/20
2024-03-13 00:31:16,634 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 00:31:17,059 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] ALBUM: Optional[Album(userId=2, id=20, title=voluptas rerum iure ut enim)]
2024-03-13 00:31:18,090 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing GET /albums/20
2024-03-13 00:31:18,365 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:31:18,365 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:18,365 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured GET /albums/20
2024-03-13 00:31:19,999 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing GET /albums/20
2024-03-13 00:31:20,260 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:31:20,262 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:20,262 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured GET /albums/20
2024-03-13 00:31:28,002 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:31:28,003 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:31:28,008 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:33:58,064 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22416 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:33:58,067 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:33:58,494 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:33:58,542 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 41 ms. Found 2 JPA repository interfaces.
2024-03-13 00:33:58,903 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:33:58,910 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:33:58,911 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:33:58,911 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:33:58,969 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:33:58,969 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 869 ms
2024-03-13 00:33:59,066 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:33:59,097 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:33:59,199 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:33:59,276 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:33:59,280 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:33:59,505 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f471037
2024-03-13 00:33:59,506 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:33:59,545 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:34:00,033 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:34:00,039 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:34:00,178 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:34:00,257 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:34:00,299 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:34:00,333 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:34:00,396 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:34:00,528 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533a27f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7dd847a2, org.springframework.security.web.context.SecurityContextHolderFilter@341c0dfc, org.springframework.security.web.header.HeaderWriterFilter@22cf1808, org.springframework.security.web.authentication.logout.LogoutFilter@66d73e2d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6d387e9b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@507fecf3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6164b3a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75b25ec3, org.springframework.security.web.session.SessionManagementFilter@2e2c9e24, org.springframework.security.web.access.ExceptionTranslationFilter@279e85eb, org.springframework.security.web.access.intercept.AuthorizationFilter@c7cbc2d]
2024-03-13 00:34:00,636 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:34:00,672 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:34:00,684 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:34:00,689 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.921 seconds (process running for 3.453)
2024-03-13 00:34:03,696 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:34:03,696 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:34:03,697 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:34:03,702 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/20
2024-03-13 00:34:04,148 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:34:04,149 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:34:04,158 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/20
2024-03-13 00:34:04,169 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:34:04,187 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:34:04,189 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 00:34:04,420 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=2, id=20, title=voluptas rerum iure ut enim)]
2024-03-13 00:34:11,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/1/photos
2024-03-13 00:34:11,285 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:34:11,285 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:34:11,287 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:34:11,290 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:34:11,293 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:34:20,085 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/1/photos
2024-03-13 00:34:20,346 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:34:20,347 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:20,348 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/1/photos
2024-03-13 00:34:20,349 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] GET request for album with id 1
2024-03-13 00:34:20,349 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/albums/1
2024-03-13 00:34:20,447 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] ALBUM: Optional[Album(userId=1, id=1, title=quidem molestiae enim)]
2024-03-13 00:34:20,448 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Get photos for album with id 1
2024-03-13 00:34:20,448 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send GET request to :https://jsonplaceholder.typicode.com/albums/1/photos
2024-03-13 00:34:43,986 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /album/20
2024-03-13 00:34:44,265 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:34:44,265 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:44,269 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /album/20
2024-03-13 00:34:44,272 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /error
2024-03-13 00:34:44,273 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /error
2024-03-13 00:34:49,396 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /album/10
2024-03-13 00:34:49,676 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:34:49,676 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:49,677 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /album/10
2024-03-13 00:34:49,680 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /error
2024-03-13 00:34:49,681 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /error
2024-03-13 00:34:53,125 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing DELETE /albums/10
2024-03-13 00:34:53,401 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 00:34:53,401 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:53,403 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured DELETE /albums/10
2024-03-13 00:34:53,404 INFO r.k.v.c.AlbumController [http-nio-8080-exec-7] DELETE request for Album with id 10
2024-03-13 00:34:53,405 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 00:34:53,853 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] ALBUM: Optional[Album(userId=1, id=10, title=distinctio laborum qui)]
2024-03-13 00:34:53,854 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Delete album with id 10
2024-03-13 00:34:53,854 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 00:35:00,481 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /albums
2024-03-13 00:35:00,752 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:35:00,752 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:35:00,753 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /albums
2024-03-13 00:35:00,761 INFO r.k.v.c.AlbumController [http-nio-8080-exec-8] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 00:35:00,763 INFO r.k.v.s.AlbumService [http-nio-8080-exec-8] Create album with id 0
2024-03-13 00:35:00,764 INFO r.k.v.s.AlbumService [http-nio-8080-exec-8] Send POST request to :https://jsonplaceholder.typicode.com/albums
2024-03-13 00:35:09,869 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing POST /albums
2024-03-13 00:35:10,129 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:35:10,130 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:35:10,131 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured POST /albums
2024-03-13 00:35:10,131 INFO r.k.v.c.AlbumController [http-nio-8080-exec-9] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 00:35:17,720 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /albums/100
2024-03-13 00:35:17,980 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-10] Authenticated user
2024-03-13 00:35:17,981 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:17,982 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-10] Responding with 403 status code
2024-03-13 00:35:17,982 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /error
2024-03-13 00:35:17,983 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /error
2024-03-13 00:35:21,180 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:35:21,447 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:35:21,448 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:21,448 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /albums/100
2024-03-13 00:35:21,449 INFO r.k.v.s.AlbumService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:35:21,552 INFO r.k.v.s.AlbumService [http-nio-8080-exec-1] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:35:31,822 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:35:32,082 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:35:32,082 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_VIEWER]]
2024-03-13 00:35:32,083 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:35:40,582 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:35:40,839 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:35:40,840 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:40,840 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:37:04,072 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:37:04,073 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:37:04,077 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:38:32,498 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21036 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:38:32,500 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:38:32,927 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:38:32,968 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:38:33,303 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:38:33,309 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:38:33,310 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:38:33,310 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:38:33,363 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:38:33,363 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 832 ms
2024-03-13 00:38:33,472 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:38:33,504 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:38:33,612 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:38:33,691 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:38:33,694 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:38:33,903 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:38:33,905 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:38:33,944 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:38:34,444 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:38:34,450 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:38:34,596 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:38:34,662 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:38:34,708 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:38:34,738 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:38:34,790 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:38:34,919 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@144792d5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1da61a29, org.springframework.security.web.context.SecurityContextHolderFilter@3f465ae, org.springframework.security.web.header.HeaderWriterFilter@39a1e1e6, org.springframework.security.web.authentication.logout.LogoutFilter@63218586, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bfc5296, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@308d4981, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b08d26f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47cf922d, org.springframework.security.web.session.SessionManagementFilter@71dfca65, org.springframework.security.web.access.ExceptionTranslationFilter@1abd1a28, org.springframework.security.web.access.intercept.AuthorizationFilter@96448ee]
2024-03-13 00:38:35,030 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:38:35,065 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:38:35,077 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:38:35,082 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.822 seconds (process running for 3.344)
2024-03-13 00:38:37,637 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:38:37,637 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:38:37,638 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:38:37,642 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /
2024-03-13 00:38:37,647 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:38:37,653 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:38:37,654 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@50fcb354
2024-03-13 00:38:37,656 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /error
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@50fcb354
2024-03-13 00:38:49,721 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /
2024-03-13 00:38:50,174 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:38:50,175 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:38:50,176 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /
2024-03-13 00:38:50,182 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /error
2024-03-13 00:38:50,183 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /error
2024-03-13 00:38:56,117 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /auth
2024-03-13 00:38:56,380 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:38:56,381 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:38:56,381 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /auth
2024-03-13 00:38:56,416 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] POST request for auth user ru.kduskov.vkapi.model.auth.User@8ad80ad
2024-03-13 00:38:56,421 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "ru.kduskov.vkapi.repository.UserRepository.save(Object)" because "this.userRepository" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.kduskov.vkapi.repository.UserRepository.save(Object)" because "this.userRepository" is null
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:38:56,424 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /error
2024-03-13 00:38:56,424 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /error
2024-03-13 00:39:16,160 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:39:16,162 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:39:16,166 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:39:19,582 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21544 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:39:19,584 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:39:20,021 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:39:20,061 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:39:20,425 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:39:20,433 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:39:20,433 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:39:20,434 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:39:20,497 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:39:20,498 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 881 ms
2024-03-13 00:39:20,615 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:39:20,650 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:39:20,756 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:39:20,845 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:39:20,848 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:39:21,080 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@782e6b40
2024-03-13 00:39:21,081 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:39:21,121 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:39:21,624 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:39:21,631 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:39:21,785 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:39:21,853 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:39:21,913 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:39:21,948 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:39:22,011 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:39:22,156 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@439d649c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e475994, org.springframework.security.web.context.SecurityContextHolderFilter@750adad8, org.springframework.security.web.header.HeaderWriterFilter@50fe5df2, org.springframework.security.web.authentication.logout.LogoutFilter@3f1d4ecf, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1da61a29, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b08d26f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@73753326, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55a2f08b, org.springframework.security.web.session.SessionManagementFilter@c770b57, org.springframework.security.web.access.ExceptionTranslationFilter@5f346355, org.springframework.security.web.access.intercept.AuthorizationFilter@55cf5626]
2024-03-13 00:39:22,266 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:39:22,303 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:39:22,315 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:39:22,319 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.987 seconds (process running for 3.518)
2024-03-13 00:39:23,066 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:39:23,066 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:39:23,067 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:39:23,072 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /auth
2024-03-13 00:39:23,527 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:39:23,528 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:39:23,536 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /auth
2024-03-13 00:39:23,597 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] POST request for auth user ru.kduskov.vkapi.model.auth.User@4b6664d5
2024-03-13 00:39:23,648 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] SQL Error: 1048, SQLState: 23000
2024-03-13 00:39:23,649 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] Column 'password' cannot be null
2024-03-13 00:39:23,657 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'password' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3587)
	at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3449)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3864)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:164)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:39:23,661 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /error
2024-03-13 00:39:23,663 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /error
2024-03-13 00:42:59,132 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:42:59,134 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:42:59,138 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:43:04,671 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 12796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:43:04,673 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:43:05,108 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:43:05,148 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:43:05,493 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:43:05,499 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:43:05,500 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:43:05,500 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:43:05,563 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:43:05,564 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 861 ms
2024-03-13 00:43:05,663 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:43:05,694 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:43:05,796 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:43:05,879 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:43:05,881 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:43:06,093 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:43:06,094 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:43:06,134 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:43:06,661 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:43:06,668 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:43:06,815 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:43:06,875 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:43:06,915 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:43:06,945 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:43:07,012 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:43:07,152 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@32084a01, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@66d73e2d, org.springframework.security.web.context.SecurityContextHolderFilter@752fecbf, org.springframework.security.web.header.HeaderWriterFilter@260fffec, org.springframework.security.web.authentication.logout.LogoutFilter@345af277, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6e475994, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73753326, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@423d662a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2433bcd4, org.springframework.security.web.session.SessionManagementFilter@41935a9d, org.springframework.security.web.access.ExceptionTranslationFilter@53fd59d4, org.springframework.security.web.access.intercept.AuthorizationFilter@1016b44e]
2024-03-13 00:43:07,255 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:43:07,291 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:43:07,303 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:43:07,308 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.9 seconds (process running for 3.443)
2024-03-13 00:44:51,309 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:51,310 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:44:51,315 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:44:55,393 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22748 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:44:55,395 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:44:55,837 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:44:55,877 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:44:56,215 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:44:56,276 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:44:56,276 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 852 ms
2024-03-13 00:44:56,383 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:44:56,414 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:44:56,517 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:44:56,596 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:44:56,599 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:44:56,824 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:44:56,825 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:44:56,865 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:44:57,366 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:44:57,372 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:57,516 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:44:57,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:44:57,624 WARN o.s.c.s.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userAuthController': Unsatisfied dependency expressed through field 'passwordEncoder': No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-03-13 00:44:57,624 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:57,626 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2024-03-13 00:44:57,630 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2024-03-13 00:44:57,632 INFO o.a.j.l.DirectJDKLog [main] Stopping service [Tomcat]
2024-03-13 00:44:57,638 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-03-13 00:44:57,656 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field passwordEncoder in ru.kduskov.vkapi.controllers.UserAuthController required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-03-13 00:45:55,695 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20028 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:45:55,697 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:45:56,143 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:45:56,184 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:45:56,527 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:45:56,596 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:45:56,596 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 859 ms
2024-03-13 00:45:56,696 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:45:56,726 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:45:56,834 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:45:56,912 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:45:56,915 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:45:57,124 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e50eeb9
2024-03-13 00:45:57,126 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:45:57,169 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:45:57,654 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:45:57,660 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:45:57,810 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:45:57,873 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:45:57,917 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:45:57,946 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:45:58,008 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:45:58,135 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b60d99c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@543a7605, org.springframework.security.web.context.SecurityContextHolderFilter@6bbac73d, org.springframework.security.web.header.HeaderWriterFilter@1828ab51, org.springframework.security.web.authentication.logout.LogoutFilter@5a08d301, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7dd847a2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6164b3a2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d6dc2b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33997e07, org.springframework.security.web.session.SessionManagementFilter@7e0b68e5, org.springframework.security.web.access.ExceptionTranslationFilter@22349ad3, org.springframework.security.web.access.intercept.AuthorizationFilter@21251e43]
2024-03-13 00:45:58,237 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:45:58,273 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:45:58,286 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:45:58,290 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.861 seconds (process running for 3.466)
2024-03-13 00:46:02,858 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:46:02,859 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:46:02,859 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:46:02,864 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:46:03,093 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Failed to find user 'admin'
2024-03-13 00:46:03,094 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:141)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:46:03,096 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:46:03,096 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3f499a2
2024-03-13 00:46:03,101 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /error
2024-03-13 00:46:03,102 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:46:03,112 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:46:03,113 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3f499a2
2024-03-13 00:48:19,372 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing POST /auth
2024-03-13 00:48:19,646 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:48:19,647 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:48:19,648 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured POST /auth
2024-03-13 00:48:19,705 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] POST request for auth user ru.kduskov.vkapi.model.auth.User@70c6fd46
2024-03-13 00:49:52,870 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:49:52,872 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:49:52,876 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:50:28,832 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22648 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:50:28,835 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:50:29,252 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:50:29,293 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:50:29,641 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:50:29,711 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:50:29,711 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 846 ms
2024-03-13 00:50:29,811 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:50:29,841 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:50:29,943 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:50:30,032 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:50:30,035 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:50:30,250 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e50eeb9
2024-03-13 00:50:30,251 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:50:30,290 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:50:30,774 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:50:30,780 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:50:30,922 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:50:30,988 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:50:31,038 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:50:31,068 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:50:31,125 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:50:31,258 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@543a7605, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33997e07, org.springframework.security.web.context.SecurityContextHolderFilter@4e53c6ef, org.springframework.security.web.header.HeaderWriterFilter@5e7ea81b, org.springframework.security.web.authentication.logout.LogoutFilter@63e40188, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@75b25ec3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@345af277, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7ec75228, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@639bf405, org.springframework.security.web.session.SessionManagementFilter@507fecf3, org.springframework.security.web.access.ExceptionTranslationFilter@42fdf45e, org.springframework.security.web.access.intercept.AuthorizationFilter@677274e7]
2024-03-13 00:50:31,361 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:50:31,399 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:50:31,412 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:50:31,416 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.841 seconds (process running for 3.344)
2024-03-13 00:50:38,368 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:50:38,368 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:50:38,368 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:50:38,374 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:50:38,808 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:50:38,809 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:50:38,816 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 00:50:38,877 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@305e6944
2024-03-13 00:53:15,527 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:53:15,529 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:53:15,533 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:53:19,279 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20592 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:53:19,281 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:53:19,714 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:53:19,754 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:53:20,101 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:53:20,108 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:53:20,109 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:53:20,109 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:53:20,173 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:53:20,173 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 859 ms
2024-03-13 00:53:20,271 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:53:20,303 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:53:20,407 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:53:20,494 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:53:20,497 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:53:20,712 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:53:20,714 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:53:20,752 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:53:21,317 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:53:21,323 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:53:21,477 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:53:21,543 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:53:21,603 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:53:21,635 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:53:21,687 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:53:21,812 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1828ab51, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e7ea81b, org.springframework.security.web.context.SecurityContextHolderFilter@e21d73, org.springframework.security.web.header.HeaderWriterFilter@1512efe9, org.springframework.security.web.authentication.logout.LogoutFilter@7fa86ddd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7156f8cf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@600b3bee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4db45d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@589a4305, org.springframework.security.web.session.SessionManagementFilter@55a5eea3, org.springframework.security.web.access.ExceptionTranslationFilter@67521a79, org.springframework.security.web.access.intercept.AuthorizationFilter@565030b7]
2024-03-13 00:53:21,931 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:53:21,970 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:53:21,983 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:53:21,987 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.949 seconds (process running for 3.491)
2024-03-13 00:53:24,658 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:53:24,658 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:53:24,659 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:53:24,664 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:53:25,106 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:53:25,107 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:53:25,114 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 00:53:25,176 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@1ae5b8cb
2024-03-13 00:53:25,282 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 00:53:25,282 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'role_id' cannot be null
2024-03-13 00:53:25,290 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'role_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:53:25,294 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /error
2024-03-13 00:53:25,296 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /error
2024-03-13 00:53:36,568 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /auth
2024-03-13 00:53:36,832 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:53:36,832 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:53:36,832 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /auth
2024-03-13 00:53:36,835 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-4] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `ru.kduskov.vkapi.model.auth.Role` (although at least one Creator exists): no int/Int-argument constructor/factory method to deserialize from Number value (1)]
2024-03-13 00:53:36,836 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /error
2024-03-13 00:53:36,836 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /error
2024-03-13 00:54:01,598 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /auth
2024-03-13 00:54:01,858 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:54:01,858 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:54:01,859 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /auth
2024-03-13 00:54:01,860 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-6] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `ru.kduskov.vkapi.model.auth.Role` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('admin')]
2024-03-13 00:54:01,861 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /error
2024-03-13 00:54:01,861 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /error
2024-03-13 00:54:46,079 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /auth
2024-03-13 00:54:46,357 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:54:46,357 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:54:46,358 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /auth
2024-03-13 00:54:46,359 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] POST request for auth user ru.kduskov.vkapi.model.auth.User@b318120
2024-03-13 00:55:14,750 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing POST /auth
2024-03-13 00:55:15,028 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:55:15,029 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:55:15,030 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured POST /auth
2024-03-13 00:55:15,030 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-9] POST request for auth user ru.kduskov.vkapi.model.auth.User@5b011c66
2024-03-13 00:55:47,167 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /kir
2024-03-13 00:55:47,426 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-10] Authenticated user
2024-03-13 00:55:47,427 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:55:47,430 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /kir
2024-03-13 00:55:47,433 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /error
2024-03-13 00:55:47,434 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /error
2024-03-13 00:56:41,581 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:56:41,584 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:56:41,588 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:59:03,517 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 6740 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:59:03,520 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:59:03,946 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:59:03,985 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:59:04,313 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:59:04,319 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:59:04,320 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:59:04,320 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:59:04,380 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:59:04,380 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 829 ms
2024-03-13 00:59:04,480 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:59:04,512 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:59:04,616 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:59:04,694 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:59:04,697 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:59:04,928 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 00:59:04,930 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:59:04,968 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:59:05,459 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:59:05,464 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:59:05,608 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:59:05,677 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:59:05,721 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:59:05,749 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:59:05,805 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:59:05,928 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71c69628, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4dc16fc9, org.springframework.security.web.context.SecurityContextHolderFilter@1d6dc2b8, org.springframework.security.web.header.HeaderWriterFilter@95aeee4, org.springframework.security.web.authentication.logout.LogoutFilter@36ae17ef, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@639bf405, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55cf5626, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1016b44e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1028a747, org.springframework.security.web.session.SessionManagementFilter@345af277, org.springframework.security.web.access.ExceptionTranslationFilter@28c75c93, org.springframework.security.web.access.intercept.AuthorizationFilter@3497ecea]
2024-03-13 00:59:06,036 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:59:06,073 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:59:06,086 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:59:06,091 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.823 seconds (process running for 3.348)
2024-03-13 00:59:09,538 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:59:09,539 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:59:09,540 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:59:09,544 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /kir
2024-03-13 00:59:09,978 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:59:09,979 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:59:09,987 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /kir
2024-03-13 00:59:09,997 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:59:09,999 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:59:34,844 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /auth/kir
2024-03-13 00:59:35,109 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:59:35,110 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:59:35,110 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /auth/kir
2024-03-13 00:59:35,112 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 00:59:35,119 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] DELETE request for auth user with username kir
2024-03-13 00:59:35,127 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-3] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 2] with root cause
jakarta.persistence.NonUniqueResultException: query did not return a unique result: 2
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:466)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.getSingleResult(QuerySqmImpl.java:1062)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:193)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:148)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.findByUsername(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.delete(UserAuthController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:59:35,129 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /error
2024-03-13 00:59:35,130 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /error
2024-03-13 01:00:31,211 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:00:31,474 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:00:31,475 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:31,476 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:00:31,477 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:00:31,480 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] USER kir
2024-03-13 01:00:35,664 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /auth
2024-03-13 01:00:35,932 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 01:00:35,933 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:35,933 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /auth
2024-03-13 01:00:35,963 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-6] POST request for auth user ru.kduskov.vkapi.model.auth.User@3cbe877b
2024-03-13 01:00:37,284 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /auth
2024-03-13 01:00:37,547 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 01:00:37,547 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:37,548 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /auth
2024-03-13 01:00:37,550 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] POST request for auth user ru.kduskov.vkapi.model.auth.User@357c519
2024-03-13 01:04:32,851 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:04:32,852 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:04:32,857 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:04:36,275 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 13140 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:04:36,277 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:04:36,712 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:04:36,753 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:04:37,130 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:04:37,137 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:04:37,138 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:04:37,138 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:04:37,194 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:04:37,195 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 886 ms
2024-03-13 01:04:37,309 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:04:37,342 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:04:37,445 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:04:37,525 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:04:37,528 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:04:37,744 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@782e6b40
2024-03-13 01:04:37,746 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:04:37,785 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:04:38,284 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:04:38,291 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:04:38,436 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:04:38,501 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:04:38,547 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:04:38,577 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:04:38,644 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:04:38,776 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15a591d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5812935, org.springframework.security.web.context.SecurityContextHolderFilter@75d9b73c, org.springframework.security.web.header.HeaderWriterFilter@1718de70, org.springframework.security.web.authentication.logout.LogoutFilter@71c69628, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@542aec6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a08d301, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f571c0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71e9640, org.springframework.security.web.session.SessionManagementFilter@32084a01, org.springframework.security.web.access.ExceptionTranslationFilter@3a720ae3, org.springframework.security.web.access.intercept.AuthorizationFilter@14b4b25e]
2024-03-13 01:04:38,890 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:04:38,928 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:04:38,940 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:04:38,945 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.926 seconds (process running for 3.494)
2024-03-13 01:04:44,025 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:04:44,026 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:04:44,028 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 01:04:44,035 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /auth
2024-03-13 01:04:44,471 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:04:44,472 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:04:44,480 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /auth
2024-03-13 01:04:44,547 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] POST request for auth user ru.kduskov.vkapi.model.auth.User@47c5f053
2024-03-13 01:05:03,684 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing DELETE /auth/kir
2024-03-13 01:05:03,944 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 01:05:03,944 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:05:03,946 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured DELETE /auth/kir
2024-03-13 01:05:03,947 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:05:03,951 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] DELETE request for auth user with username kir
2024-03-13 01:05:11,388 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:05:11,648 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:05:11,648 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:05:11,650 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:05:11,651 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:06:34,256 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:06:34,257 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:06:34,262 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:06:37,915 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19772 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:06:37,916 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:06:38,349 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:06:38,390 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 01:06:38,759 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:06:38,765 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:06:38,766 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:06:38,766 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:06:38,834 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:06:38,835 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 884 ms
2024-03-13 01:06:38,992 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:06:39,043 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:06:39,152 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:06:39,239 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:06:39,242 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:06:39,461 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61dd1c3d
2024-03-13 01:06:39,463 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:06:39,508 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:06:40,033 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:06:40,039 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:06:40,195 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:06:40,262 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:06:40,312 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:06:40,345 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:06:40,407 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:06:40,539 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54c17a2b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16279a5d, org.springframework.security.web.context.SecurityContextHolderFilter@1828ab51, org.springframework.security.web.header.HeaderWriterFilter@2eb31735, org.springframework.security.web.authentication.logout.LogoutFilter@41736818, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@48d14ea0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@589a4305, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@95aeee4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f7949dc, org.springframework.security.web.session.SessionManagementFilter@7156f8cf, org.springframework.security.web.access.ExceptionTranslationFilter@565030b7, org.springframework.security.web.access.intercept.AuthorizationFilter@1a99744a]
2024-03-13 01:06:40,651 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:06:40,688 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:06:40,701 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:06:40,706 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 3.049 seconds (process running for 3.61)
2024-03-13 01:06:41,020 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:06:41,020 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:06:41,021 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 01:06:41,027 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 01:06:41,500 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 01:06:41,501 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:41,511 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 01:06:41,583 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@261c9d5e
2024-03-13 01:06:43,694 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /auth
2024-03-13 01:06:43,956 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:06:43,956 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:43,957 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /auth
2024-03-13 01:06:43,958 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] POST request for auth user ru.kduskov.vkapi.model.auth.User@7cfa0abc
2024-03-13 01:06:47,140 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:06:47,401 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:06:47,401 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:47,402 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:06:47,404 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:06:47,407 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:07:01,073 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:07:01,074 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:07:01,081 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:09:31,174 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21104 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:09:31,177 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:09:31,616 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:09:31,657 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 01:09:32,012 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:09:32,019 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:09:32,019 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:09:32,020 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:09:32,086 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:09:32,087 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 877 ms
2024-03-13 01:09:32,195 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:09:32,229 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:09:32,335 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:09:32,413 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:09:32,416 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:09:32,639 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 01:09:32,640 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:09:32,679 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:09:33,188 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:09:33,195 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:09:33,345 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:09:33,394 WARN o.s.c.s.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSecurityConfig': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
2024-03-13 01:09:33,394 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:09:33,396 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2024-03-13 01:09:33,400 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2024-03-13 01:09:33,402 INFO o.a.j.l.DirectJDKLog [main] Stopping service [Tomcat]
2024-03-13 01:09:33,409 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-03-13 01:09:33,422 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSecurityConfig': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at ru.kduskov.vkapi.ApiApplication.main(ApiApplication.java:12)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 20 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 34 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 48 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:229)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 58 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:96)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 70 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:423)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:399)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:352)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:334)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:317)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:242)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:243)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:372)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:373)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:93)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:89)
	... 74 common frames omitted
2024-03-13 01:16:12,230 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 4460 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:16:12,232 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:16:12,654 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:16:12,694 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:16:13,033 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:16:13,096 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:16:13,097 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 833 ms
2024-03-13 01:16:13,201 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:16:13,231 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:16:13,335 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:16:13,414 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:16:13,417 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:16:13,630 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 01:16:13,632 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:16:13,670 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:16:14,164 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:16:14,170 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:16:14,318 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:16:14,385 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:16:14,427 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:16:14,456 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:16:14,505 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:16:14,647 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@535b4dbf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f571c0e, org.springframework.security.web.context.SecurityContextHolderFilter@4a249610, org.springframework.security.web.header.HeaderWriterFilter@c770b57, org.springframework.security.web.authentication.logout.LogoutFilter@3fc7abf6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5a08d301, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@279e85eb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22349ad3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@c7cbc2d, org.springframework.security.web.session.SessionManagementFilter@188b9a1e, org.springframework.security.web.access.ExceptionTranslationFilter@1e9f6095, org.springframework.security.web.access.intercept.AuthorizationFilter@457d3f54]
2024-03-13 01:16:14,764 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:16:14,814 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:16:14,818 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.829 seconds (process running for 3.353)
2024-03-13 01:16:14,826 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:16:14,828 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:16:14,833 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:17:13,080 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:17:13,083 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:17:13,504 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:17:13,543 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 01:17:13,885 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:17:13,955 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:17:13,955 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 842 ms
2024-03-13 01:17:14,054 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:17:14,084 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:17:14,188 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:17:14,267 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:17:14,270 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:17:14,482 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34cb0e49
2024-03-13 01:17:14,484 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:17:14,522 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:17:15,003 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:17:15,009 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:17:15,150 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:17:15,210 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:17:15,255 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:17:15,284 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:17:15,347 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:17:15,475 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@28796d0e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3cc548f6, org.springframework.security.web.context.SecurityContextHolderFilter@41736818, org.springframework.security.web.header.HeaderWriterFilter@96448ee, org.springframework.security.web.authentication.logout.LogoutFilter@6d387e9b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4babe06f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@144792d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@439d649c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fed0c04, org.springframework.security.web.session.SessionManagementFilter@1fe37d27, org.springframework.security.web.access.ExceptionTranslationFilter@6164b3a2, org.springframework.security.web.access.intercept.AuthorizationFilter@33997e07]
2024-03-13 01:17:15,578 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:17:15,613 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:17:15,627 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:17:15,631 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.806 seconds (process running for 3.35)
2024-03-13 01:17:43,277 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:17:43,277 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:17:43,279 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2024-03-13 01:17:43,284 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /auth/12
2024-03-13 01:17:43,745 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:17:43,747 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:43,756 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /auth/12
2024-03-13 01:17:43,768 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:17:43,817 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] PUT request for auth user with id 12
2024-03-13 01:17:49,538 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /auth
2024-03-13 01:17:49,799 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:17:49,800 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:49,801 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /auth
2024-03-13 01:17:49,802 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] POST request for auth user ru.kduskov.vkapi.model.auth.User@291bc425
2024-03-13 01:17:55,368 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing PUT /auth/13
2024-03-13 01:17:55,629 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 01:17:55,630 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:55,631 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured PUT /auth/13
2024-03-13 01:17:55,633 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] PUT request for auth user with id 13
2024-03-13 01:17:55,670 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-4] SQL Error: 1048, SQLState: 23000
2024-03-13 01:17:55,670 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-4] Column 'role_id' cannot be null
2024-03-13 01:17:55,677 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'role_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3587)
	at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3449)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3864)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:164)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.update(UserAuthController.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:917)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:734)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 01:17:55,682 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing PUT /error
2024-03-13 01:17:55,684 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured PUT /error
2024-03-13 01:18:20,791 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing PUT /auth/13
2024-03-13 01:18:21,053 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 01:18:21,053 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:18:21,054 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured PUT /auth/13
2024-03-13 01:18:21,055 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-6] PUT request for auth user with id 13
2024-03-13 01:19:02,801 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing POST /auth
2024-03-13 01:19:03,073 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 01:19:03,074 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:03,074 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured POST /auth
2024-03-13 01:19:03,076 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-7] POST request for auth user ru.kduskov.vkapi.model.auth.User@5a322fb3
2024-03-13 01:19:25,790 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing PUT /auth/13
2024-03-13 01:19:26,066 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 01:19:26,066 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:26,068 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured PUT /auth/13
2024-03-13 01:19:26,070 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] PUT request for auth user with id 13
2024-03-13 01:19:38,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing PUT /auth/14
2024-03-13 01:19:38,282 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 01:19:38,282 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:38,283 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured PUT /auth/14
2024-03-13 01:19:38,284 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-9] PUT request for auth user with id 14
2024-03-13 01:20:04,744 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:04,745 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:20:04,751 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:20:08,101 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21800 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:20:08,103 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:20:08,537 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:20:08,578 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:20:08,930 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:20:08,936 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:08,937 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:20:08,937 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:20:09,019 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:20:09,019 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 884 ms
2024-03-13 01:20:09,143 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:20:09,179 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:20:09,291 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:20:09,379 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:20:09,383 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:20:09,600 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32d0d7eb
2024-03-13 01:20:09,601 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:20:09,640 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:20:10,132 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:20:10,138 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:10,279 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:20:10,343 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:20:10,388 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:20:10,419 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:20:10,483 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:20:10,607 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15a591d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5812935, org.springframework.security.web.context.SecurityContextHolderFilter@75d9b73c, org.springframework.security.web.header.HeaderWriterFilter@1718de70, org.springframework.security.web.authentication.logout.LogoutFilter@71c69628, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@542aec6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a08d301, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f571c0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71e9640, org.springframework.security.web.session.SessionManagementFilter@32084a01, org.springframework.security.web.access.ExceptionTranslationFilter@3a720ae3, org.springframework.security.web.access.intercept.AuthorizationFilter@14b4b25e]
2024-03-13 01:20:10,716 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:20:10,752 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:10,765 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:20:10,769 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.917 seconds (process running for 3.468)
2024-03-13 01:20:13,781 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:20:13,782 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:20:13,782 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 01:20:13,786 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 01:20:14,235 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 01:20:14,236 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:14,244 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 01:20:14,307 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@467a3478
2024-03-13 01:20:20,233 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing PUT /auth/15
2024-03-13 01:20:20,496 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:20:20,497 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:20,499 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured PUT /auth/15
2024-03-13 01:20:20,501 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:20:20,503 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] PUT request for auth user with id 15
2024-03-13 01:20:46,022 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:46,023 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:20:46,028 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:20:49,600 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 17292 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:20:49,602 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:20:50,045 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:20:50,085 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:20:50,455 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:20:50,461 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:50,462 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:20:50,462 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:20:50,532 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:20:50,532 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 899 ms
2024-03-13 01:20:50,647 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:20:50,682 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:20:50,782 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:20:50,859 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:20:50,863 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:20:51,072 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 01:20:51,074 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:20:51,111 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:20:51,599 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:20:51,604 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:51,743 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:20:51,805 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:20:51,850 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:20:51,883 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:20:51,937 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:20:52,066 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f1a3c4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a08d301, org.springframework.security.web.context.SecurityContextHolderFilter@2eb73a42, org.springframework.security.web.header.HeaderWriterFilter@71dfca65, org.springframework.security.web.authentication.logout.LogoutFilter@7ec75228, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@66d73e2d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423d662a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@279e85eb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63e40188, org.springframework.security.web.session.SessionManagementFilter@2eb31735, org.springframework.security.web.access.ExceptionTranslationFilter@4d359c69, org.springframework.security.web.access.intercept.AuthorizationFilter@1fe37d27]
2024-03-13 01:20:52,177 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:20:52,221 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:52,234 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:20:52,239 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.913 seconds (process running for 3.461)
2024-03-13 01:20:52,380 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:20:52,381 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:20:52,382 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 01:20:52,388 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /auth/15
2024-03-13 01:20:52,828 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:20:52,828 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:52,837 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /auth/15
2024-03-13 01:20:52,849 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:20:52,900 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] PUT request for auth user with id 15
2024-03-13 01:24:55,466 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:24:55,467 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:24:55,472 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:18:55,288 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 3356 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:18:55,292 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:18:56,611 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:18:56,724 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 98 ms. Found 3 JPA repository interfaces.
2024-03-13 12:18:57,617 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:18:57,632 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:18:57,634 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:18:57,634 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:18:57,762 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:18:57,765 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2397 ms
2024-03-13 12:18:58,032 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:18:58,134 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:18:58,444 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:18:58,675 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:18:58,683 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:18:59,266 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6c421123
2024-03-13 12:18:59,268 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:18:59,354 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:19:00,541 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:19:00,555 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:19:00,941 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:19:01,077 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:19:01,244 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:19:01,315 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:19:01,455 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:19:01,759 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@272f5373, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@799557c8, org.springframework.security.web.context.SecurityContextHolderFilter@560c3758, org.springframework.security.web.header.HeaderWriterFilter@3f3a529f, org.springframework.security.web.authentication.logout.LogoutFilter@7ec176da, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@574134ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52a605c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f451970, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f05d08c, org.springframework.security.web.session.SessionManagementFilter@5f69462f, org.springframework.security.web.access.ExceptionTranslationFilter@267e0ca0, org.springframework.security.web.access.intercept.AuthorizationFilter@40b678b3]
2024-03-13 12:19:02,038 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:19:02,130 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:19:02,161 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:19:02,172 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 7.456 seconds (process running for 9.583)
2024-03-13 12:19:33,171 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:19:33,173 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:19:33,176 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 12:19:33,186 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /posts
2024-03-13 12:19:34,205 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 12:19:34,206 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=editor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS_ALBUMS]]
2024-03-13 12:19:34,225 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /posts
2024-03-13 12:19:34,373 INFO r.k.v.c.PostController [http-nio-8080-exec-1] POST request for post Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:19:34,421 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 12:19:34,499 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Create /posts with id 0
2024-03-13 12:19:34,500 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/posts
2024-03-13 12:20:29,924 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:20:29,926 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:20:29,937 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:21:13,266 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20360 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:21:13,271 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:21:14,284 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:21:14,378 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 82 ms. Found 3 JPA repository interfaces.
2024-03-13 12:21:15,100 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:21:15,113 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:21:15,114 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:21:15,114 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:21:15,231 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:21:15,233 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1889 ms
2024-03-13 12:21:15,477 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:21:15,543 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:21:15,760 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:21:15,948 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:21:15,954 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:21:16,403 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2a667f44
2024-03-13 12:21:16,406 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:21:16,487 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:21:17,596 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:21:17,608 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:21:17,920 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:21:18,047 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:21:18,196 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:21:18,265 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:21:18,388 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:21:18,676 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@233d2b76, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2370c90, org.springframework.security.web.context.SecurityContextHolderFilter@519a81dd, org.springframework.security.web.header.HeaderWriterFilter@6d2f910b, org.springframework.security.web.authentication.logout.LogoutFilter@7d3faf1d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5fafd099, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3d8b9dee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@30d2f9ea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a9f7572, org.springframework.security.web.session.SessionManagementFilter@39f7cc46, org.springframework.security.web.access.ExceptionTranslationFilter@13fad0c7, org.springframework.security.web.access.intercept.AuthorizationFilter@2c6d442d]
2024-03-13 12:21:18,913 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:21:18,998 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:21:19,020 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:21:19,030 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.272 seconds (process running for 7.416)
2024-03-13 12:21:26,594 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:21:26,595 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:21:26,597 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 12:21:26,607 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /posts
2024-03-13 12:21:27,619 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 12:21:27,620 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=editor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS_ALBUMS]]
2024-03-13 12:21:27,637 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /posts
2024-03-13 12:21:27,808 INFO r.k.v.c.PostController [http-nio-8080-exec-2] POST request for post Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:21:27,845 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 12:21:27,920 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Create /posts with id 0
2024-03-13 12:21:27,921 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts
2024-03-13 12:24:21,654 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:24:21,657 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:24:21,667 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:24:29,280 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 5732 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:24:29,284 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:24:30,278 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:24:30,373 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-03-13 12:24:31,122 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:24:31,133 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:24:31,134 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:24:31,135 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:24:31,253 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:24:31,254 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1901 ms
2024-03-13 12:24:31,486 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:24:31,560 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:24:31,776 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:24:31,955 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:24:31,963 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:24:32,420 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7d12429
2024-03-13 12:24:32,424 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:24:32,506 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:24:33,615 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:24:33,626 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:24:33,938 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:24:34,067 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:24:34,205 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:24:34,268 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:24:34,389 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:24:34,667 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45ecdd32, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@408980aa, org.springframework.security.web.context.SecurityContextHolderFilter@30d2f9ea, org.springframework.security.web.header.HeaderWriterFilter@2a4f1bc5, org.springframework.security.web.authentication.logout.LogoutFilter@272f5373, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@644c3590, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a61d819, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c7b100b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@68e62b3b, org.springframework.security.web.session.SessionManagementFilter@45cddfd3, org.springframework.security.web.access.ExceptionTranslationFilter@2351255a, org.springframework.security.web.access.intercept.AuthorizationFilter@47bbf44d]
2024-03-13 12:24:34,898 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:24:34,981 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:24:35,004 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:24:35,016 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.233 seconds (process running for 7.362)
2024-03-13 12:27:23,472 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:27:23,473 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:27:23,476 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 12:27:23,488 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /posts
2024-03-13 12:27:24,497 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 12:27:24,499 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=editor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS_ALBUMS]]
2024-03-13 12:27:24,516 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /posts
2024-03-13 12:27:24,679 INFO r.k.v.c.PostController [http-nio-8080-exec-2] POST request for post Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:27:24,721 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 12:27:24,798 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Create /posts Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:27:24,798 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts
2024-03-13 12:28:54,035 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:28:54,039 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:28:54,048 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:29:03,994 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 13900 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:29:03,998 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:29:04,916 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:29:05,011 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-03-13 12:29:05,793 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:29:05,805 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:29:05,807 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:29:05,807 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:29:05,925 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:29:05,925 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1862 ms
2024-03-13 12:29:06,154 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:29:06,222 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:29:06,444 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:29:06,627 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:29:06,634 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:29:07,089 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32d0d7eb
2024-03-13 12:29:07,093 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:29:07,190 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:29:08,391 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:29:08,405 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:29:08,734 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:29:08,854 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:29:09,001 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:29:09,067 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:29:09,186 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:29:09,454 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@17e4beda, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1be4f05c, org.springframework.security.web.context.SecurityContextHolderFilter@77b01226, org.springframework.security.web.header.HeaderWriterFilter@1f57fa23, org.springframework.security.web.authentication.logout.LogoutFilter@71842e18, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@408980aa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@c7b100b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@677d4cea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4202bfe8, org.springframework.security.web.session.SessionManagementFilter@1bca9b64, org.springframework.security.web.access.ExceptionTranslationFilter@89ff043, org.springframework.security.web.access.intercept.AuthorizationFilter@5d1eb214]
2024-03-13 12:29:09,682 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:29:09,763 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:29:09,787 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:29:09,797 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.329 seconds (process running for 7.495)
2024-03-13 12:29:13,714 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:29:13,714 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:29:13,716 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 12:29:13,727 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /posts
2024-03-13 12:29:14,753 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 12:29:14,755 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=editor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS_ALBUMS]]
2024-03-13 12:29:14,770 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /posts
2024-03-13 12:29:14,900 INFO r.k.v.c.PostController [http-nio-8080-exec-2] POST request for post Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:29:14,934 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 12:29:15,007 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Create /posts with params Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 12:29:15,009 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts
2024-03-13 12:29:18,309 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /posts/1
2024-03-13 12:29:18,918 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 12:29:18,920 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 12:29:18,941 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /posts/1
2024-03-13 12:29:18,946 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 12:29:18,949 INFO r.k.v.c.PostController [http-nio-8080-exec-3] DELETE request for post with id 1
2024-03-13 12:29:18,950 INFO r.k.v.s.PostService [http-nio-8080-exec-3] Get post with id 1
2024-03-13 12:29:18,951 INFO r.k.v.s.PostService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 12:29:19,021 INFO r.k.v.s.PostService [http-nio-8080-exec-3] DELETE post with id 1
2024-03-13 12:29:19,031 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Delete /posts with id 1
2024-03-13 12:29:19,032 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send DELETE request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 12:31:05,903 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /albums
2024-03-13 12:31:06,506 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 12:31:06,507 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 12:31:06,508 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /albums
2024-03-13 12:31:06,517 INFO r.k.v.c.AlbumController [http-nio-8080-exec-6] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 12:31:06,518 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-6] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 12:31:06,519 INFO r.k.v.s.AlbumService [http-nio-8080-exec-6] Create album with id 0
2024-03-13 12:31:06,519 INFO r.k.v.s.AlbumService [http-nio-8080-exec-6] Send POST request to :https://jsonplaceholder.typicode.com/albums
2024-03-13 12:31:35,024 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing DELETE /albums/10
2024-03-13 12:31:35,634 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 12:31:35,635 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 12:31:35,636 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured DELETE /albums/10
2024-03-13 12:31:35,638 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-7] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:31:35,640 INFO r.k.v.c.AlbumController [http-nio-8080-exec-7] DELETE request for Album with id 10
2024-03-13 12:31:35,641 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Get album with id : 10
2024-03-13 12:31:35,641 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 12:31:36,137 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] ALBUM: Optional[Album(userId=1, id=10, title=distinctio laborum qui)]
2024-03-13 12:31:36,148 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Delete /albums with id 10
2024-03-13 12:31:36,149 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 12:31:52,482 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:31:52,485 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:31:52,494 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:43:44,006 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20652 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:43:44,010 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:43:44,981 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:43:45,077 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-03-13 12:43:45,909 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:43:45,923 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:43:45,925 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:43:45,926 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:43:46,074 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:43:46,075 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1996 ms
2024-03-13 12:43:46,329 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:43:46,403 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:43:46,645 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:43:46,829 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:43:46,837 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:43:47,325 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 12:43:47,329 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:43:47,423 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:43:48,597 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:43:48,608 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:43:49,025 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:43:49,145 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:43:49,250 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:43:49,312 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:43:49,442 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:43:49,744 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@61627c9d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53c21c05, org.springframework.security.web.context.SecurityContextHolderFilter@99774ec, org.springframework.security.web.header.HeaderWriterFilter@5687ade6, org.springframework.security.web.authentication.logout.LogoutFilter@55465bfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@17e4beda, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33d2f9d3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@445c693, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f986031, org.springframework.security.web.session.SessionManagementFilter@77b01226, org.springframework.security.web.access.ExceptionTranslationFilter@4e9d203e, org.springframework.security.web.access.intercept.AuthorizationFilter@7789526e]
2024-03-13 12:43:49,970 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:43:50,053 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:43:50,076 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:43:50,088 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.628 seconds (process running for 7.855)
2024-03-13 12:43:56,984 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:43:56,985 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:43:57,000 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:45:05,463 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19284 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:45:05,467 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:45:06,448 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:45:06,547 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 87 ms. Found 3 JPA repository interfaces.
2024-03-13 12:45:07,332 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:45:07,348 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:45:07,350 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:45:07,350 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:45:07,484 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:45:07,485 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1942 ms
2024-03-13 12:45:07,754 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:45:07,826 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:45:08,045 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:45:08,228 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:45:08,234 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:45:08,711 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38e00b47
2024-03-13 12:45:08,715 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:45:08,820 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:45:09,977 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:45:09,990 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:45:10,423 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:45:10,550 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:45:10,649 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:45:10,737 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:45:10,873 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:45:11,182 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2512155e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ef59aee, org.springframework.security.web.context.SecurityContextHolderFilter@445c693, org.springframework.security.web.header.HeaderWriterFilter@40dc2ade, org.springframework.security.web.authentication.logout.LogoutFilter@5d1eb214, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@38326fd5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@272485a6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5cf6ba1c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@779cb140, org.springframework.security.web.session.SessionManagementFilter@677d4cea, org.springframework.security.web.access.ExceptionTranslationFilter@3d8b9dee, org.springframework.security.web.access.intercept.AuthorizationFilter@2a9f7572]
2024-03-13 12:45:11,447 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:45:11,526 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:45:11,550 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:45:11,560 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.621 seconds (process running for 7.815)
2024-03-13 12:45:16,384 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:45:16,389 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:45:16,392 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 3 ms
2024-03-13 12:45:16,404 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /albums/10
2024-03-13 12:45:17,403 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-2] Failed to authenticate since password does not match stored value
2024-03-13 12:45:17,408 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:45:17,410 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 12:45:17,410 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@6f7b9904
2024-03-13 12:45:17,418 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /error
2024-03-13 12:45:17,422 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 12:45:17,444 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Servlet.service() for servlet [dispatcherServlet] threw exception
java.lang.NullPointerException: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
	at ru.kduskov.vkapi.utils.GeneralInfo.user(GeneralInfo.java:9)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:26)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:45:17,447 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Exception Processing ErrorPage[errorCode=0, location=/error]
java.lang.NullPointerException: Cannot invoke "org.springframework.security.core.Authentication.getName()" because "auth" is null
	at ru.kduskov.vkapi.utils.GeneralInfo.user(GeneralInfo.java:9)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:26)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:46:41,704 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:46:41,707 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:46:41,718 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:46:57,084 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 2480 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:46:57,087 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:46:58,008 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:46:58,102 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 83 ms. Found 3 JPA repository interfaces.
2024-03-13 12:46:58,851 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:46:58,864 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:46:58,865 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:46:58,865 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:46:58,978 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:46:58,979 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1825 ms
2024-03-13 12:46:59,210 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:46:59,282 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:46:59,496 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:46:59,675 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:46:59,682 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:47:00,139 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3eec8583
2024-03-13 12:47:00,142 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:47:00,226 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:47:01,317 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:47:01,330 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:47:01,701 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:47:01,810 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:47:01,923 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:47:01,989 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:47:02,105 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:47:02,384 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fd77205, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b9c05f, org.springframework.security.web.context.SecurityContextHolderFilter@2fcad739, org.springframework.security.web.header.HeaderWriterFilter@c7b100b, org.springframework.security.web.authentication.logout.LogoutFilter@2370c90, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@52a9db63, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79a92277, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1cb73a92, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@288915a1, org.springframework.security.web.session.SessionManagementFilter@5f7c1de0, org.springframework.security.web.access.ExceptionTranslationFilter@77b01226, org.springframework.security.web.access.intercept.AuthorizationFilter@17e4beda]
2024-03-13 12:47:02,611 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:47:02,694 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:47:02,718 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:47:02,726 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.159 seconds (process running for 7.3)
2024-03-13 12:47:06,359 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:47:06,360 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:47:06,362 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-03-13 12:47:06,373 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 12:47:07,384 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-1] Failed to authenticate since password does not match stored value
2024-03-13 12:47:07,385 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:47:07,403 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 12:47:07,403 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@1165dd03
2024-03-13 12:47:07,410 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 12:47:07,414 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 12:47:07,532 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 12:47:07,532 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'who' cannot be null
2024-03-13 12:47:07,545 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] threw exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:26)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:47:07,548 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Exception Processing ErrorPage[errorCode=0, location=/error]
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:26)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:50:06,115 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:50:06,118 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:50:06,128 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:50:18,343 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 23500 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:50:18,347 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:50:19,295 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:50:19,399 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 92 ms. Found 3 JPA repository interfaces.
2024-03-13 12:50:20,222 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:50:20,236 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:50:20,237 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:50:20,238 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:50:20,377 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:50:20,377 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1966 ms
2024-03-13 12:50:20,624 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:50:20,698 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:50:20,936 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:50:21,113 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:50:21,120 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:50:21,629 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@425b5fe2
2024-03-13 12:50:21,633 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:50:21,738 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:50:22,950 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:50:22,963 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:50:23,365 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:50:23,496 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:50:23,612 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:50:23,678 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:50:23,805 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:50:24,086 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45a4587d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70a91d72, org.springframework.security.web.context.SecurityContextHolderFilter@6aed4a23, org.springframework.security.web.header.HeaderWriterFilter@1bca9b64, org.springframework.security.web.authentication.logout.LogoutFilter@7789526e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2512155e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f7c1de0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@10664c3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@52a9db63, org.springframework.security.web.session.SessionManagementFilter@445c693, org.springframework.security.web.access.ExceptionTranslationFilter@51d76ad3, org.springframework.security.web.access.intercept.AuthorizationFilter@14091e24]
2024-03-13 12:50:24,386 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:50:24,477 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:50:24,506 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:50:24,515 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.722 seconds (process running for 7.901)
2024-03-13 12:50:24,625 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:50:24,631 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:50:24,632 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 12:50:24,645 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 12:50:25,653 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-1] Failed to authenticate since password does not match stored value
2024-03-13 12:50:25,658 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:50:25,660 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 12:50:25,660 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@73241a21
2024-03-13 12:50:25,669 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 12:50:25,681 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 12:50:25,699 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 1 null
2024-03-13 12:50:25,701 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 2 null
2024-03-13 12:50:25,701 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 3 null
2024-03-13 12:50:25,791 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 12:50:25,791 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'who' cannot be null
2024-03-13 12:50:25,807 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] threw exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:35)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:50:25,810 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Exception Processing ErrorPage[errorCode=0, location=/error]
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:35)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:51:04,588 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:51:04,592 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:51:04,605 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:51:10,871 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 8512 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:51:10,876 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:51:11,816 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:51:11,911 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-03-13 12:51:12,663 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:51:12,675 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:51:12,676 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:51:12,677 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:51:12,797 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:51:12,797 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1852 ms
2024-03-13 12:51:13,027 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:51:13,101 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:51:13,319 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:51:13,492 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:51:13,498 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:51:13,958 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@425b5fe2
2024-03-13 12:51:13,961 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:51:14,046 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:51:15,161 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:51:15,176 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:51:15,547 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:51:15,670 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:51:15,776 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:51:15,849 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:51:15,963 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:51:16,290 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@799557c8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f05d08c, org.springframework.security.web.context.SecurityContextHolderFilter@43414b88, org.springframework.security.web.header.HeaderWriterFilter@ce8b59e, org.springframework.security.web.authentication.logout.LogoutFilter@33d2f9d3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@57063e08, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13fad0c7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4a7c8cb7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c6d442d, org.springframework.security.web.session.SessionManagementFilter@432b883, org.springframework.security.web.access.ExceptionTranslationFilter@3e3a07ab, org.springframework.security.web.access.intercept.AuthorizationFilter@5f7c1de0]
2024-03-13 12:51:16,543 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:51:16,620 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:51:16,643 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:51:16,653 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.292 seconds (process running for 7.474)
2024-03-13 12:51:30,540 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:51:30,543 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:51:30,554 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:51:50,783 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22592 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:51:50,786 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:51:51,753 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:51:51,869 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 103 ms. Found 3 JPA repository interfaces.
2024-03-13 12:51:52,662 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:51:52,677 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:51:52,678 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:51:52,680 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:51:52,805 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:51:52,805 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1950 ms
2024-03-13 12:51:53,061 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:51:53,173 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:51:53,404 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:51:53,605 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:51:53,613 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:51:54,125 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34cb0e49
2024-03-13 12:51:54,129 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:51:54,227 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:51:55,442 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:51:55,455 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:51:55,868 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:51:56,006 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:51:56,128 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:51:56,215 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:51:56,339 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:51:56,616 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7789526e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fafd099, org.springframework.security.web.context.SecurityContextHolderFilter@4e9d203e, org.springframework.security.web.header.HeaderWriterFilter@43414b88, org.springframework.security.web.authentication.logout.LogoutFilter@7712df76, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5d1eb214, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5687ade6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d8b9dee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@580e01cd, org.springframework.security.web.session.SessionManagementFilter@89ff043, org.springframework.security.web.access.ExceptionTranslationFilter@f09c282, org.springframework.security.web.access.intercept.AuthorizationFilter@6afb240d]
2024-03-13 12:51:56,852 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:51:56,932 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:51:56,956 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:51:56,965 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.704 seconds (process running for 7.89)
2024-03-13 12:51:57,443 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 12:51:57,443 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 12:51:57,445 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 12:51:57,456 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 12:51:58,468 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-1] Failed to authenticate since password does not match stored value
2024-03-13 12:51:58,469 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 12:51:58,473 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 12:51:58,474 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@27e6eab2
2024-03-13 12:51:58,483 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 12:51:58,486 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 12:51:58,509 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 1 null
2024-03-13 12:51:58,510 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 2 null
2024-03-13 12:51:58,510 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 3 null
2024-03-13 12:51:58,510 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 4 [Ljava.lang.Object;@7282227b
2024-03-13 12:51:58,624 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 12:51:58,625 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'who' cannot be null
2024-03-13 12:51:58,638 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] threw exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:36)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:51:58,642 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Exception Processing ErrorPage[errorCode=0, location=/error]
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:36)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 12:53:04,867 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:53:04,870 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 12:53:04,881 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 12:53:11,477 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 3756 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 12:53:11,482 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 12:53:12,448 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 12:53:12,543 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 81 ms. Found 3 JPA repository interfaces.
2024-03-13 12:53:13,277 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 12:53:13,292 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 12:53:13,292 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 12:53:13,292 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 12:53:13,439 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 12:53:13,444 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1892 ms
2024-03-13 12:53:13,669 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 12:53:13,737 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 12:53:13,947 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 12:53:14,116 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 12:53:14,129 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 12:53:14,578 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@53ba7997
2024-03-13 12:53:14,578 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 12:53:14,660 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 12:53:15,741 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 12:53:15,756 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 12:53:16,119 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 12:53:16,239 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 12:53:16,336 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 12:53:16,426 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 12:53:16,547 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 12:53:16,819 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@272485a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6aed4a23, org.springframework.security.web.context.SecurityContextHolderFilter@4718d320, org.springframework.security.web.header.HeaderWriterFilter@4a45ff31, org.springframework.security.web.authentication.logout.LogoutFilter@1f57fa23, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@20fdaf3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@267e0ca0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5aa5b3af, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40b678b3, org.springframework.security.web.session.SessionManagementFilter@43d84df1, org.springframework.security.web.access.ExceptionTranslationFilter@6447dc25, org.springframework.security.web.access.intercept.AuthorizationFilter@40dc2ade]
2024-03-13 12:53:17,069 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 12:53:17,154 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 12:53:17,179 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 12:53:17,179 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.289 seconds (process running for 7.512)
2024-03-13 13:00:03,696 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:00:03,697 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:00:03,699 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 13:00:03,709 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /albums/10
2024-03-13 13:00:04,738 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-2] Failed to authenticate since password does not match stored value
2024-03-13 13:00:04,739 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 13:00:04,743 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 13:00:04,743 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@58fe0df7
2024-03-13 13:00:04,752 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /error
2024-03-13 13:00:04,754 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 13:00:04,775 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-2] 4 WWW-Authenticate, X-Content-Type-Options, X-XSS-Protection, Cache-Control, Pragma, Expires, X-Frame-Options
2024-03-13 13:00:04,866 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] SQL Error: 1048, SQLState: 23000
2024-03-13 13:00:04,866 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] Column 'who' cannot be null
2024-03-13 13:00:04,878 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Servlet.service() for servlet [dispatcherServlet] threw exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:35)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 13:00:04,881 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Exception Processing ErrorPage[errorCode=0, location=/error]
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:35)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 13:01:42,454 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:01:42,459 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:01:42,469 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:01:49,460 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22584 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:01:49,464 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:01:50,375 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:01:50,471 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2024-03-13 13:01:51,228 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:01:51,239 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:01:51,241 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:01:51,241 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:01:51,358 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:01:51,358 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1831 ms
2024-03-13 13:01:51,595 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:01:51,660 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:01:51,882 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:01:52,055 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:01:52,060 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:01:52,516 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38e00b47
2024-03-13 13:01:52,519 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:01:52,602 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:01:53,726 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:01:53,739 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:01:54,159 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:01:54,284 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:01:54,396 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:01:54,479 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:01:54,620 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:01:54,892 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1cb73a92, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d3faf1d, org.springframework.security.web.context.SecurityContextHolderFilter@126e2710, org.springframework.security.web.header.HeaderWriterFilter@43d84df1, org.springframework.security.web.authentication.logout.LogoutFilter@1bca9b64, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7712df76, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a22325d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f09c282, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@36017835, org.springframework.security.web.session.SessionManagementFilter@1002f859, org.springframework.security.web.access.ExceptionTranslationFilter@4131261, org.springframework.security.web.access.intercept.AuthorizationFilter@677d4cea]
2024-03-13 13:01:55,156 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:01:55,248 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:01:55,274 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:01:55,283 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.328 seconds (process running for 7.537)
2024-03-13 13:01:58,392 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:01:58,393 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:01:58,395 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:01:58,404 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 13:01:59,435 DEBUG o.s.s.a.d.DaoAuthenticationProvider [http-nio-8080-exec-1] Failed to authenticate since password does not match stored value
2024-03-13 13:01:59,436 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:79)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:147)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 13:01:59,440 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 13:01:59,441 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3f29fa22
2024-03-13 13:01:59,449 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 13:01:59,452 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 13:01:59,473 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 4 WWW-Authenticate, X-Content-Type-Options, X-XSS-Protection, Cache-Control, Pragma, Expires, X-Frame-Options
2024-03-13 13:01:59,474 INFO r.k.v.c.CustomAuthenticationExceptionHandler [http-nio-8080-exec-1] 41 Basic realm="Realm"
2024-03-13 13:01:59,573 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 13:01:59,574 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'who' cannot be null
2024-03-13 13:01:59,586 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] threw exception
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:37)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 13:01:59,588 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Exception Processing ErrorPage[errorCode=0, location=/error]
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy108.save(Unknown Source)
	at ru.kduskov.vkapi.components.CustomAuthenticationExceptionHandler.commence(CustomAuthenticationExceptionHandler.java:37)
	at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:219)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:197)
	at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:178)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:147)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:443)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:367)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:295)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:387)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:233)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 72 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'who' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 115 common frames omitted
2024-03-13 13:02:51,701 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /albums/10
2024-03-13 13:02:52,298 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:02:52,298 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:02:52,306 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 13:02:52,306 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /error
2024-03-13 13:02:52,306 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /error
2024-03-13 13:03:24,727 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:03:24,731 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:03:24,741 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:06:58,459 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 11384 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:06:58,463 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:06:59,440 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:06:59,534 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 82 ms. Found 3 JPA repository interfaces.
2024-03-13 13:07:00,379 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:07:00,397 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:07:00,400 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:07:00,400 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:07:00,570 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:07:00,570 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2040 ms
2024-03-13 13:07:00,841 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:07:00,913 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:07:01,141 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:07:01,348 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:07:01,355 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:07:01,832 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@429e7914
2024-03-13 13:07:01,836 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:07:01,935 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:07:03,216 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:07:03,230 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:07:03,634 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:07:03,753 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:07:03,848 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:07:03,929 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:07:04,078 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:07:04,381 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4645a575, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b332eda, org.springframework.security.web.context.SecurityContextHolderFilter@e98adb2, org.springframework.security.web.header.HeaderWriterFilter@677d4cea, org.springframework.security.web.authentication.logout.LogoutFilter@14091e24, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3b9c05f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1cb73a92, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@574134ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bf70600, org.springframework.security.web.session.SessionManagementFilter@10664c3d, org.springframework.security.web.access.ExceptionTranslationFilter@7ec176da, org.springframework.security.web.access.intercept.AuthorizationFilter@53c21c05]
2024-03-13 13:07:04,644 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:07:04,741 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:07:04,771 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:07:04,781 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.852 seconds (process running for 8.044)
2024-03-13 13:07:04,993 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:07:04,994 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:07:04,997 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 3 ms
2024-03-13 13:07:05,005 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /albums/10
2024-03-13 13:07:05,962 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:07:05,962 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:07:05,986 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-2] HANDLE 403
2024-03-13 13:07:05,986 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-2] 1 null
2024-03-13 13:07:05,986 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-2] 1 /albums/10
2024-03-13 13:07:07,801 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /albums/10
2024-03-13 13:07:08,410 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:07:08,410 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:07:08,413 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-3] HANDLE 403
2024-03-13 13:07:08,413 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-3] 1 null
2024-03-13 13:07:08,413 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-3] 1 /albums/10
2024-03-13 13:07:35,473 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:07:35,476 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:07:35,487 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:07:41,722 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 11860 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:07:41,727 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:07:42,716 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:07:42,836 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 105 ms. Found 3 JPA repository interfaces.
2024-03-13 13:07:43,648 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:07:43,661 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:07:43,663 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:07:43,663 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:07:43,784 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:07:43,786 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1996 ms
2024-03-13 13:07:44,025 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:07:44,100 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:07:44,382 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:07:44,569 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:07:44,575 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:07:45,063 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7d12429
2024-03-13 13:07:45,066 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:07:45,154 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:07:46,284 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:07:46,297 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:07:46,665 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:07:46,806 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:07:46,911 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:07:47,016 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:07:47,135 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:07:47,426 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5cca5ff3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2fcad739, org.springframework.security.web.context.SecurityContextHolderFilter@ce8b59e, org.springframework.security.web.header.HeaderWriterFilter@1fe2c5ad, org.springframework.security.web.authentication.logout.LogoutFilter@519a81dd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@40b678b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@344cf00f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@34525143, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10664c3d, org.springframework.security.web.session.SessionManagementFilter@267e0ca0, org.springframework.security.web.access.ExceptionTranslationFilter@3ec52163, org.springframework.security.web.access.intercept.AuthorizationFilter@508abc74]
2024-03-13 13:07:47,684 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:07:47,762 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:07:47,788 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:07:47,799 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.628 seconds (process running for 7.838)
2024-03-13 13:07:52,354 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:07:52,355 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:07:52,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:07:52,369 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 13:07:53,352 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:07:53,354 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:07:53,374 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-1] HANDLE 403
2024-03-13 13:07:53,374 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-1] 1 null
2024-03-13 13:07:53,376 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-1] 1 /albums/10
2024-03-13 13:08:17,738 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:08:17,741 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:08:17,751 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:08:24,744 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 14964 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:08:24,748 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:08:25,738 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:08:25,831 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 81 ms. Found 3 JPA repository interfaces.
2024-03-13 13:08:26,624 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:08:26,635 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:08:26,636 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:08:26,637 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:08:26,775 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:08:26,775 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1959 ms
2024-03-13 13:08:27,008 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:08:27,075 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:08:27,289 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:08:27,466 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:08:27,473 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:08:27,939 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@429e7914
2024-03-13 13:08:27,942 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:08:28,033 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:08:29,179 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:08:29,194 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:08:29,593 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:08:29,718 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:08:29,824 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:08:29,921 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:08:30,047 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:08:30,359 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4645a575, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b332eda, org.springframework.security.web.context.SecurityContextHolderFilter@e98adb2, org.springframework.security.web.header.HeaderWriterFilter@677d4cea, org.springframework.security.web.authentication.logout.LogoutFilter@14091e24, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3b9c05f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1cb73a92, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@574134ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bf70600, org.springframework.security.web.session.SessionManagementFilter@10664c3d, org.springframework.security.web.access.ExceptionTranslationFilter@7ec176da, org.springframework.security.web.access.intercept.AuthorizationFilter@53c21c05]
2024-03-13 13:08:30,595 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:08:30,692 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:08:30,718 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:08:30,727 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.572 seconds (process running for 7.737)
2024-03-13 13:08:32,027 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:08:32,027 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:08:32,029 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:08:32,040 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/10
2024-03-13 13:08:33,053 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:08:33,055 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:08:33,077 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-1] HANDLE 403
2024-03-13 13:08:33,146 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 13:08:33,151 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 13:09:15,943 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /albums/10
2024-03-13 13:09:16,560 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:09:16,560 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:09:16,568 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /albums/10
2024-03-13 13:09:16,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:09:16,584 INFO r.k.v.c.AlbumController [http-nio-8080-exec-3] DELETE request for Album with id 10
2024-03-13 13:09:16,624 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:09:16,624 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Get album with id : 10
2024-03-13 13:09:16,624 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 13:09:17,184 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] ALBUM: Optional[Album(userId=1, id=10, title=distinctio laborum qui)]
2024-03-13 13:09:17,193 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Delete /albums with id 10
2024-03-13 13:09:17,193 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 13:09:35,011 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:09:35,014 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:09:35,023 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:16:38,994 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21820 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:16:38,999 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:16:39,994 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:16:40,107 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 98 ms. Found 3 JPA repository interfaces.
2024-03-13 13:16:40,889 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:16:40,896 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:16:40,896 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:16:40,903 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:16:41,024 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:16:41,025 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1958 ms
2024-03-13 13:16:41,349 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:16:41,421 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:16:41,673 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:16:41,886 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:16:41,894 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:16:42,371 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@429e7914
2024-03-13 13:16:42,373 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:16:42,470 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:16:43,645 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:16:43,659 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:16:44,160 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:16:44,307 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:16:44,404 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:16:44,485 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:16:44,625 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:16:44,928 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5625ba2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47bbf44d, org.springframework.security.web.context.SecurityContextHolderFilter@32675dd4, org.springframework.security.web.header.HeaderWriterFilter@126e2710, org.springframework.security.web.authentication.logout.LogoutFilter@6aed4a23, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@227c0cf7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4f836d9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4d145177, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35c9f527, org.springframework.security.web.session.SessionManagementFilter@6d2f910b, org.springframework.security.web.access.ExceptionTranslationFilter@67cd193d, org.springframework.security.web.access.intercept.AuthorizationFilter@e98adb2]
2024-03-13 13:16:45,164 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:16:45,250 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:16:45,278 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:16:45,289 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.84 seconds (process running for 7.71)
2024-03-13 13:16:46,396 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:16:46,396 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:16:46,404 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 8 ms
2024-03-13 13:16:46,412 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /posts?id=3
2024-03-13 13:16:47,400 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:16:47,408 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:16:47,424 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /posts?id=3
2024-03-13 13:16:47,448 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:16:47,569 INFO r.k.v.c.PostController [http-nio-8080-exec-2] PUT request for post with id 3 and params for update Post(userId=0, id=0, title=null, body=new body)
2024-03-13 13:16:47,601 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:16:47,601 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Get post with id 3
2024-03-13 13:16:47,601 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:16:48,054 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Update /posts with id 3
2024-03-13 13:16:48,054 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send PUT request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:17:38,450 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:17:38,453 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:17:38,463 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:17:45,337 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 16668 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:17:45,342 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:17:46,249 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:17:46,341 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 82 ms. Found 3 JPA repository interfaces.
2024-03-13 13:17:47,080 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:17:47,092 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:17:47,094 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:17:47,095 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:17:47,207 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:17:47,208 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1805 ms
2024-03-13 13:17:47,440 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:17:47,507 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:17:47,733 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:17:47,903 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:17:47,910 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:17:48,376 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@59a94d0f
2024-03-13 13:17:48,379 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:17:48,468 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:17:49,607 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:17:49,619 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:17:50,003 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:17:50,116 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:17:50,214 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:17:50,302 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:17:50,447 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:17:50,723 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6bf70600, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ca5da54, org.springframework.security.web.context.SecurityContextHolderFilter@1cb73a92, org.springframework.security.web.header.HeaderWriterFilter@20fdaf3e, org.springframework.security.web.authentication.logout.LogoutFilter@408980aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@62a6a47e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36017835, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6afb240d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57a0aeb8, org.springframework.security.web.session.SessionManagementFilter@7712df76, org.springframework.security.web.access.ExceptionTranslationFilter@677d4cea, org.springframework.security.web.access.intercept.AuthorizationFilter@38326fd5]
2024-03-13 13:17:50,985 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:17:51,076 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:17:51,101 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:17:51,112 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.279 seconds (process running for 7.426)
2024-03-13 13:18:01,413 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:18:01,413 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:18:01,416 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:18:01,427 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing PUT /posts?id=3
2024-03-13 13:18:02,447 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:18:02,449 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:18:02,467 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured PUT /posts?id=3
2024-03-13 13:18:02,492 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:18:02,615 INFO r.k.v.c.PostController [http-nio-8080-exec-1] PUT request for post with id 3 and params for update Post(userId=0, id=0, title=null, body=new body)
2024-03-13 13:18:02,648 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:18:02,653 INFO r.k.v.s.PostService [http-nio-8080-exec-1] Get post with id 3
2024-03-13 13:18:02,654 INFO r.k.v.s.PostService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:18:03,099 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Update /posts with id 3
2024-03-13 13:18:03,100 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send PUT request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:18:12,894 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:18:12,897 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:18:12,908 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:23:51,059 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 15692 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:23:51,064 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:23:52,028 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:23:52,120 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 80 ms. Found 3 JPA repository interfaces.
2024-03-13 13:23:52,912 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:23:52,927 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:23:52,928 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:23:52,929 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:23:53,053 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:23:53,054 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1922 ms
2024-03-13 13:23:53,304 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:23:53,376 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:23:53,612 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:23:53,795 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:23:53,802 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:23:54,281 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@517fbf62
2024-03-13 13:23:54,284 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:23:54,368 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:23:55,583 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:23:55,597 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:23:55,995 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:23:56,115 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:23:56,237 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:23:56,314 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:23:56,430 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:23:56,743 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@52b7c1d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@451f3f66, org.springframework.security.web.context.SecurityContextHolderFilter@2a4f1bc5, org.springframework.security.web.header.HeaderWriterFilter@3c5cb013, org.springframework.security.web.authentication.logout.LogoutFilter@5cf6ba1c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5625ba2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@89ff043, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@39f7cc46, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5d1eb214, org.springframework.security.web.session.SessionManagementFilter@32675dd4, org.springframework.security.web.access.ExceptionTranslationFilter@1529d534, org.springframework.security.web.access.intercept.AuthorizationFilter@7d3faf1d]
2024-03-13 13:23:57,005 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:23:57,100 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:23:57,125 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:23:57,135 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.6 seconds (process running for 7.748)
2024-03-13 13:24:01,473 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:24:01,474 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:24:01,476 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:24:01,485 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/20
2024-03-13 13:24:02,473 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:24:02,481 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:24:02,497 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /albums/20
2024-03-13 13:24:02,521 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:24:02,561 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:24:02,569 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Get /albums with id : 20
2024-03-13 13:24:02,569 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 13:24:41,054 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:24:41,058 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:24:41,068 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:30:27,082 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22568 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:30:27,086 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:30:28,103 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:30:28,192 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 79 ms. Found 3 JPA repository interfaces.
2024-03-13 13:30:28,952 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:30:28,965 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:30:28,966 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:30:28,966 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:30:29,088 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:30:29,088 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1933 ms
2024-03-13 13:30:29,337 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:30:29,410 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:30:29,646 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:30:29,830 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:30:29,838 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:30:30,361 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5db9f51f
2024-03-13 13:30:30,364 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:30:30,455 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:30:31,605 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:30:31,617 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:30:31,983 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:30:32,097 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:30:32,196 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:30:32,274 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:30:32,392 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:30:32,672 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f986031, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@38326fd5, org.springframework.security.web.context.SecurityContextHolderFilter@33d2f9d3, org.springframework.security.web.header.HeaderWriterFilter@519a81dd, org.springframework.security.web.authentication.logout.LogoutFilter@47bbf44d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4202bfe8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55ff64fd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@272485a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4a467ada, org.springframework.security.web.session.SessionManagementFilter@c7b100b, org.springframework.security.web.access.ExceptionTranslationFilter@5687ade6, org.springframework.security.web.access.intercept.AuthorizationFilter@580e01cd]
2024-03-13 13:30:32,899 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:30:32,980 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:30:33,006 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:30:33,017 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.452 seconds (process running for 7.614)
2024-03-13 13:31:01,151 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:31:01,151 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:31:01,154 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 13:31:01,163 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /posts/1
2024-03-13 13:31:02,183 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:31:02,186 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:31:02,206 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /posts/1
2024-03-13 13:31:02,232 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:31:02,240 INFO r.k.v.c.PostController [http-nio-8080-exec-2] GET request for post with id 1
2024-03-13 13:31:02,275 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:31:02,349 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /posts with id : 1
2024-03-13 13:31:02,350 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 13:31:07,063 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/20
2024-03-13 13:31:07,682 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:31:07,682 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:31:07,682 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/20
2024-03-13 13:31:07,686 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:31:07,686 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:31:07,702 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Get /albums with id : 20
2024-03-13 13:31:07,702 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 13:31:13,392 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /users/1
2024-03-13 13:31:14,009 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:31:14,017 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:31:14,017 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /users/1
2024-03-13 13:31:14,025 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:31:14,025 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.UserService
2024-03-13 13:31:14,041 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Get /users with id : 1
2024-03-13 13:31:14,041 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/users/1
2024-03-13 13:32:54,608 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:32:54,612 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:32:54,620 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:33:01,204 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 2704 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:33:01,208 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:33:02,162 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:33:02,260 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 85 ms. Found 3 JPA repository interfaces.
2024-03-13 13:33:03,028 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:33:03,040 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:33:03,041 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:33:03,042 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:33:03,162 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:33:03,163 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1886 ms
2024-03-13 13:33:03,393 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:33:03,469 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:33:03,691 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:33:03,872 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:33:03,878 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:33:04,355 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@66e1b2a
2024-03-13 13:33:04,359 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:33:04,449 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:33:05,586 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:33:05,598 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:33:05,974 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:33:06,097 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:33:06,194 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:33:06,279 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:33:06,400 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:33:06,681 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@70a91d72, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52a9db63, org.springframework.security.web.context.SecurityContextHolderFilter@40b678b3, org.springframework.security.web.header.HeaderWriterFilter@3a61d819, org.springframework.security.web.authentication.logout.LogoutFilter@5fafd099, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@ef59aee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5cf6ba1c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79a92277, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@402d76c7, org.springframework.security.web.session.SessionManagementFilter@9d2c0ed, org.springframework.security.web.access.ExceptionTranslationFilter@30d2f9ea, org.springframework.security.web.access.intercept.AuthorizationFilter@45ecdd32]
2024-03-13 13:33:06,912 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:33:06,991 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:33:07,015 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:33:07,024 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.336 seconds (process running for 7.542)
2024-03-13 13:33:12,830 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:33:12,830 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:33:12,833 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 3 ms
2024-03-13 13:33:12,845 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /users/1
2024-03-13 13:33:13,854 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:33:13,856 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:33:13,875 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /users/1
2024-03-13 13:33:13,901 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:33:13,945 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.UserService
2024-03-13 13:33:14,010 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /users with id : 1
2024-03-13 13:33:14,011 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/users/1
2024-03-13 13:33:49,039 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing PUT /posts?id=3
2024-03-13 13:33:49,644 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:33:49,644 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:33:49,644 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured PUT /posts?id=3
2024-03-13 13:33:49,652 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:33:49,664 INFO r.k.v.c.PostController [http-nio-8080-exec-3] PUT request for post with id 3 and params for update Post(userId=0, id=0, title=null, body=new body)
2024-03-13 13:33:49,668 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:33:49,678 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Get /posts with id : 3
2024-03-13 13:33:49,678 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:33:49,838 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Update /posts/3 with id 3
2024-03-13 13:33:49,846 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send PUT request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:35:13,101 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:35:13,103 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:35:13,113 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:42:11,194 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 12744 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:42:11,197 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:42:12,163 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:42:12,254 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 81 ms. Found 3 JPA repository interfaces.
2024-03-13 13:42:12,986 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:42:12,998 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:42:13,000 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:42:13,000 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:42:13,134 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:42:13,134 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1868 ms
2024-03-13 13:42:13,363 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:42:13,428 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:42:13,642 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:42:13,823 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:42:13,830 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:42:14,289 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7ff09659
2024-03-13 13:42:14,292 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:42:14,378 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:42:15,466 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:42:15,478 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:42:15,858 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:42:15,967 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:42:16,084 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:42:16,161 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:42:16,282 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:42:16,561 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45f70f68, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16e3d6d0, org.springframework.security.web.context.SecurityContextHolderFilter@7207f3c2, org.springframework.security.web.header.HeaderWriterFilter@272485a6, org.springframework.security.web.authentication.logout.LogoutFilter@17e4beda, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bf70600, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@57063e08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f05d08c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@406d922, org.springframework.security.web.session.SessionManagementFilter@1cb73a92, org.springframework.security.web.access.ExceptionTranslationFilter@445c693, org.springframework.security.web.access.intercept.AuthorizationFilter@2512155e]
2024-03-13 13:42:16,791 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:42:16,874 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:42:16,897 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:42:16,907 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.231 seconds (process running for 7.368)
2024-03-13 13:44:45,490 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:44:45,491 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:44:45,494 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 3 ms
2024-03-13 13:44:45,504 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /posts?id=3
2024-03-13 13:44:46,563 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:44:46,564 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:44:46,579 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /posts?id=3
2024-03-13 13:44:46,613 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:44:46,763 INFO r.k.v.c.PostController [http-nio-8080-exec-2] PUT request for post with id 3 and params for update Post(userId=0, id=0, title=null, body=new body)
2024-03-13 13:44:46,809 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:44:46,815 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /posts with id : 3
2024-03-13 13:44:46,903 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:44:47,289 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Update /posts with id 3
2024-03-13 13:44:47,296 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send PUT request to :https://jsonplaceholder.typicode.com/posts/3
2024-03-13 13:44:54,725 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /posts/12
2024-03-13 13:44:55,349 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:44:55,349 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:44:55,349 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /posts/12
2024-03-13 13:44:55,357 INFO r.k.v.c.PostController [http-nio-8080-exec-3] GET request for post with id 12
2024-03-13 13:44:55,357 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Get /posts with id : 12
2024-03-13 13:44:55,365 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/posts/12
2024-03-13 13:45:04,544 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /posts
2024-03-13 13:45:05,158 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:45:05,158 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=editor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS_ALBUMS]]
2024-03-13 13:45:05,158 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /posts
2024-03-13 13:45:05,166 INFO r.k.v.c.PostController [http-nio-8080-exec-4] POST request for post Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 13:45:05,166 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Create /posts with params Post(userId=1, id=0, title=new title, body=new body)
2024-03-13 13:45:05,174 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/posts
2024-03-13 13:45:08,751 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /posts/1
2024-03-13 13:45:09,365 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 13:45:09,373 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:09,373 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /posts/1
2024-03-13 13:45:09,373 INFO r.k.v.c.PostController [http-nio-8080-exec-5] DELETE request for post with id 1
2024-03-13 13:45:09,373 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Get /posts with id : 1
2024-03-13 13:45:09,389 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Send POST request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 13:45:09,453 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Delete /posts with id 1
2024-03-13 13:45:09,461 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Send DELETE request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 13:45:14,148 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /albums/20
2024-03-13 13:45:14,749 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 13:45:14,749 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:14,749 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured GET /albums/20
2024-03-13 13:45:14,757 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-6] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:45:14,757 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-6] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:45:14,757 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Get /albums with id : 20
2024-03-13 13:45:14,765 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 13:45:28,189 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing DELETE /albums/9
2024-03-13 13:45:28,795 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 13:45:28,795 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:28,803 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured DELETE /albums/9
2024-03-13 13:45:28,803 INFO r.k.v.c.AlbumController [http-nio-8080-exec-7] DELETE request for Album with id 9
2024-03-13 13:45:28,803 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Get /albums with id : 9
2024-03-13 13:45:28,812 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/9
2024-03-13 13:45:29,280 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Delete /albums with id 9
2024-03-13 13:45:29,289 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/9
2024-03-13 13:45:34,582 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing DELETE /albums/-1
2024-03-13 13:45:35,207 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 13:45:35,207 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:35,207 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured DELETE /albums/-1
2024-03-13 13:45:35,207 INFO r.k.v.c.AlbumController [http-nio-8080-exec-8] DELETE request for Album with id -1
2024-03-13 13:45:35,207 INFO r.k.v.s.BaseService [http-nio-8080-exec-8] Get /albums with id : -1
2024-03-13 13:45:35,222 INFO r.k.v.s.BaseService [http-nio-8080-exec-8] Send POST request to :https://jsonplaceholder.typicode.com/albums/-1
2024-03-13 13:45:35,808 WARN r.k.v.s.BaseService [http-nio-8080-exec-8] /albums with id -1 wasn't found:$s
2024-03-13 13:45:42,333 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing POST /albums
2024-03-13 13:45:42,965 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 13:45:42,965 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:45:42,965 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured POST /albums
2024-03-13 13:45:42,973 INFO r.k.v.c.AlbumController [http-nio-8080-exec-9] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 13:45:42,973 INFO r.k.v.s.BaseService [http-nio-8080-exec-9] Create /albums with params Album(userId=1, id=0, title=New title)
2024-03-13 13:45:42,989 INFO r.k.v.s.BaseService [http-nio-8080-exec-9] Send POST request to :https://jsonplaceholder.typicode.com/albums
2024-03-13 13:45:53,141 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing GET /users/1
2024-03-13 13:45:53,774 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-10] Authenticated user
2024-03-13 13:45:53,774 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:53,774 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured GET /users/1
2024-03-13 13:45:53,782 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-10] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:45:53,782 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-10] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.UserService
2024-03-13 13:45:53,782 INFO r.k.v.s.BaseService [http-nio-8080-exec-10] Get /users with id : 1
2024-03-13 13:45:53,799 INFO r.k.v.s.BaseService [http-nio-8080-exec-10] Send POST request to :https://jsonplaceholder.typicode.com/users/1
2024-03-13 13:45:55,888 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /users/3
2024-03-13 13:45:56,529 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:45:56,529 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:45:56,534 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /users/3
2024-03-13 13:45:56,534 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Get /users with id : 3
2024-03-13 13:45:56,544 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/users/3
2024-03-13 13:46:02,626 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing DELETE /users/5
2024-03-13 13:46:03,242 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:46:03,242 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:46:03,242 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured DELETE /users/5
2024-03-13 13:46:03,242 INFO r.k.v.c.UserController [http-nio-8080-exec-2] DELETE request for user with id 5
2024-03-13 13:46:03,250 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /users with id : 5
2024-03-13 13:46:03,258 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/users/5
2024-03-13 13:46:03,420 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Delete /users with id 5
2024-03-13 13:46:03,428 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send DELETE request to :https://jsonplaceholder.typicode.com/users/5
2024-03-13 13:46:10,322 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /users/5/albums
2024-03-13 13:46:10,939 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:46:10,939 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=users, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USERS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USERS]]
2024-03-13 13:46:10,939 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /users/5/albums
2024-03-13 13:46:18,509 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /users/7/posts
2024-03-13 13:46:19,124 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:46:19,124 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 13:46:19,124 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /users/7/posts
2024-03-13 13:46:19,132 INFO r.k.v.s.UserService [http-nio-8080-exec-4] Get posts for user with id 7
2024-03-13 13:46:19,132 INFO r.k.v.s.UserService [http-nio-8080-exec-4] Send request to https://jsonplaceholder.typicode.com/users/7/posts
2024-03-13 13:47:03,917 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /users/7/posts
2024-03-13 13:47:04,527 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 13:47:04,527 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=users, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USERS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USERS]]
2024-03-13 13:47:04,527 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured GET /users/7/posts
2024-03-13 13:47:04,527 INFO r.k.v.s.UserService [http-nio-8080-exec-5] Get posts for user with id 7
2024-03-13 13:47:04,535 INFO r.k.v.s.UserService [http-nio-8080-exec-5] Send request to https://jsonplaceholder.typicode.com/users/7/posts
2024-03-13 13:47:15,533 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /users/7/posts
2024-03-13 13:47:16,151 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 13:47:16,151 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:47:16,151 INFO r.k.v.c.CustomAccessDeniedHandler [http-nio-8080-exec-6] HANDLE 403
2024-03-13 13:47:16,167 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /error
2024-03-13 13:47:16,175 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured GET /error
2024-03-13 13:47:37,513 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:47:37,517 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:47:37,532 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:51:58,562 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21800 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:51:58,566 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:51:59,536 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:51:59,635 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 88 ms. Found 3 JPA repository interfaces.
2024-03-13 13:52:00,439 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:52:00,453 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:52:00,454 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:52:00,454 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:52:00,577 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:52:00,577 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1944 ms
2024-03-13 13:52:00,825 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:52:00,920 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:52:01,149 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:52:01,341 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:52:01,348 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:52:01,832 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20be890d
2024-03-13 13:52:01,835 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:52:01,922 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:52:03,146 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:52:03,160 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:52:03,539 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:52:03,662 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:52:03,784 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:52:03,862 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:52:03,985 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:52:04,297 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@61627c9d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53c21c05, org.springframework.security.web.context.SecurityContextHolderFilter@99774ec, org.springframework.security.web.header.HeaderWriterFilter@5687ade6, org.springframework.security.web.authentication.logout.LogoutFilter@55465bfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@17e4beda, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33d2f9d3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@445c693, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f986031, org.springframework.security.web.session.SessionManagementFilter@77b01226, org.springframework.security.web.access.ExceptionTranslationFilter@4e9d203e, org.springframework.security.web.access.intercept.AuthorizationFilter@7789526e]
2024-03-13 13:52:04,540 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:52:04,638 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:52:04,668 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:52:04,679 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.633 seconds (process running for 7.82)
2024-03-13 13:52:26,248 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:52:26,248 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:52:26,248 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2024-03-13 13:52:26,265 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /posts/1/comments
2024-03-13 13:52:27,318 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:52:27,322 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:52:27,347 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /posts/1/comments
2024-03-13 13:52:27,371 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 13:52:27,379 INFO r.k.v.c.PostController [http-nio-8080-exec-2] GET request for post with id 1
2024-03-13 13:52:27,427 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 13:52:27,435 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /posts with id : 1
2024-03-13 13:52:27,500 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/1
2024-03-13 13:52:27,959 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Get comments for post with id 1
2024-03-13 13:52:27,959 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get posts for user with id 1
2024-03-13 13:52:27,959 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send request to https://jsonplaceholder.typicode.com/posts/1/comments
2024-03-13 13:52:38,078 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /posts/1/comments
2024-03-13 13:52:38,696 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:52:38,696 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:52:38,704 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /posts/1/comments
2024-03-13 13:52:38,704 INFO r.k.v.c.PostController [http-nio-8080-exec-3] GET request for post with id 1
2024-03-13 13:52:38,704 INFO r.k.v.s.PostService [http-nio-8080-exec-3] Get comments for post with id 1
2024-03-13 13:52:38,704 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Get posts for user with id 1
2024-03-13 13:52:38,704 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send request to https://jsonplaceholder.typicode.com/posts/1/comments
2024-03-13 13:52:40,262 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /posts/1/comments
2024-03-13 13:52:40,884 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:52:40,884 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:52:40,884 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /posts/1/comments
2024-03-13 13:52:40,891 INFO r.k.v.c.PostController [http-nio-8080-exec-4] GET request for post with id 1
2024-03-13 13:52:40,891 INFO r.k.v.s.PostService [http-nio-8080-exec-4] Get comments for post with id 1
2024-03-13 13:52:40,891 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Get posts for user with id 1
2024-03-13 13:52:40,891 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send request to https://jsonplaceholder.typicode.com/posts/1/comments
2024-03-13 13:52:42,264 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /posts/1/comments
2024-03-13 13:52:42,888 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 13:52:42,888 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:52:42,896 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured GET /posts/1/comments
2024-03-13 13:52:42,896 INFO r.k.v.c.PostController [http-nio-8080-exec-5] GET request for post with id 1
2024-03-13 13:52:42,896 INFO r.k.v.s.PostService [http-nio-8080-exec-5] Get comments for post with id 1
2024-03-13 13:52:42,896 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Get posts for user with id 1
2024-03-13 13:52:42,896 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Send request to https://jsonplaceholder.typicode.com/posts/1/comments
2024-03-13 13:52:44,020 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /posts/1/comments
2024-03-13 13:52:44,625 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 13:52:44,625 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 13:52:44,625 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured GET /posts/1/comments
2024-03-13 13:52:44,633 INFO r.k.v.c.PostController [http-nio-8080-exec-6] GET request for post with id 1
2024-03-13 13:52:44,634 INFO r.k.v.s.PostService [http-nio-8080-exec-6] Get comments for post with id 1
2024-03-13 13:52:44,634 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Get posts for user with id 1
2024-03-13 13:52:44,635 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Send request to https://jsonplaceholder.typicode.com/posts/1/comments
2024-03-13 13:53:25,180 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:53:25,183 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:53:25,192 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:55:04,484 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 8960 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:55:04,489 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:55:05,493 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:55:05,587 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 83 ms. Found 3 JPA repository interfaces.
2024-03-13 13:55:06,378 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:55:06,398 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:55:06,400 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:55:06,401 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:55:06,530 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:55:06,531 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1972 ms
2024-03-13 13:55:06,781 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:55:06,857 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:55:07,108 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:55:07,286 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:55:07,294 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:55:07,820 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5a51336a
2024-03-13 13:55:07,824 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:55:07,910 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:55:09,131 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:55:09,144 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:55:09,532 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:55:09,662 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:55:09,764 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:55:09,840 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:55:09,977 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:55:10,262 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2370c90, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a9f7572, org.springframework.security.web.context.SecurityContextHolderFilter@5608e254, org.springframework.security.web.header.HeaderWriterFilter@f451970, org.springframework.security.web.authentication.logout.LogoutFilter@36017835, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@580e01cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45cddfd3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1bca9b64, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@644c3590, org.springframework.security.web.session.SessionManagementFilter@5687ade6, org.springframework.security.web.access.ExceptionTranslationFilter@24fb8317, org.springframework.security.web.access.intercept.AuthorizationFilter@71842e18]
2024-03-13 13:55:10,498 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:55:10,582 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:55:10,609 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:55:10,620 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 6.655 seconds (process running for 7.989)
2024-03-13 13:55:13,356 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:55:13,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:55:13,360 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 13:55:13,370 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/12/photos
2024-03-13 13:55:14,390 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 13:55:14,395 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:55:14,414 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/12/photos
2024-03-13 13:55:14,444 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:55:14,451 INFO r.k.v.c.AlbumController [http-nio-8080-exec-2] GET request for album with id 12
2024-03-13 13:55:14,485 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:55:14,488 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get /albums with id : 12
2024-03-13 13:55:14,552 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/12
2024-03-13 13:55:16,533 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Get photos for album with id 12
2024-03-13 13:55:16,533 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Get posts for user with id 12
2024-03-13 13:55:16,544 INFO r.k.v.s.BaseService [http-nio-8080-exec-2] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:55:27,161 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/12/photos
2024-03-13 13:55:27,778 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 13:55:27,786 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:55:27,786 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/12/photos
2024-03-13 13:55:27,792 INFO r.k.v.c.AlbumController [http-nio-8080-exec-3] GET request for album with id 12
2024-03-13 13:55:27,794 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Get photos for album with id 12
2024-03-13 13:55:27,794 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Get posts for user with id 12
2024-03-13 13:55:27,802 INFO r.k.v.s.BaseService [http-nio-8080-exec-3] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:55:59,689 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/12/photos
2024-03-13 13:56:00,296 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:56:00,296 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:56:00,300 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/12/photos
2024-03-13 13:56:00,300 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] GET request for album with id 12
2024-03-13 13:56:00,300 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Get photos for album with id 12
2024-03-13 13:56:00,300 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Get posts for user with id 12
2024-03-13 13:56:00,316 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:56:02,018 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /albums/12/photos
2024-03-13 13:56:02,655 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 13:56:02,655 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:56:02,666 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured GET /albums/12/photos
2024-03-13 13:56:02,667 INFO r.k.v.c.AlbumController [http-nio-8080-exec-5] GET request for album with id 12
2024-03-13 13:56:02,668 INFO r.k.v.s.AlbumService [http-nio-8080-exec-5] Get photos for album with id 12
2024-03-13 13:56:02,668 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Get posts for user with id 12
2024-03-13 13:56:02,679 INFO r.k.v.s.BaseService [http-nio-8080-exec-5] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:56:48,510 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:56:48,512 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:56:48,521 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 13:56:56,620 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 4504 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 13:56:56,624 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 13:56:57,562 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 13:56:57,693 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 117 ms. Found 3 JPA repository interfaces.
2024-03-13 13:56:58,494 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 13:56:58,507 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 13:56:58,508 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 13:56:58,509 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 13:56:58,635 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 13:56:58,636 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1944 ms
2024-03-13 13:56:58,888 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 13:56:58,962 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 13:56:59,189 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 13:56:59,414 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 13:56:59,421 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 13:57:00,003 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@343db2f6
2024-03-13 13:57:00,006 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 13:57:00,091 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 13:57:01,519 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 13:57:01,532 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:57:01,923 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 13:57:02,080 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:57:02,266 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 13:57:02,337 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 13:57:02,466 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 13:57:02,772 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@272f5373, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@799557c8, org.springframework.security.web.context.SecurityContextHolderFilter@560c3758, org.springframework.security.web.header.HeaderWriterFilter@3f3a529f, org.springframework.security.web.authentication.logout.LogoutFilter@7ec176da, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@574134ba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52a605c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f451970, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f05d08c, org.springframework.security.web.session.SessionManagementFilter@5f69462f, org.springframework.security.web.access.ExceptionTranslationFilter@267e0ca0, org.springframework.security.web.access.intercept.AuthorizationFilter@40b678b3]
2024-03-13 13:57:03,023 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 13:57:03,106 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 13:57:03,132 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 13:57:03,141 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 7.036 seconds (process running for 8.242)
2024-03-13 13:57:07,549 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 13:57:07,550 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 13:57:07,551 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 13:57:07,561 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/12/photos
2024-03-13 13:57:08,538 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 13:57:08,539 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:57:08,572 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /albums/12/photos
2024-03-13 13:57:08,594 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 13:57:08,601 INFO r.k.v.c.AlbumController [http-nio-8080-exec-1] GET request for album with id 12
2024-03-13 13:57:08,632 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-1] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 13:57:08,636 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Get /albums with id : 12
2024-03-13 13:57:08,696 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/albums/12
2024-03-13 13:57:09,231 INFO r.k.v.s.AlbumService [http-nio-8080-exec-1] Get photos for album with id 12
2024-03-13 13:57:09,231 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Get posts for user with id 12
2024-03-13 13:57:09,238 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:57:09,318 INFO r.k.v.s.BaseService [http-nio-8080-exec-1] Send result for request /albums/12/photos
2024-03-13 13:57:10,547 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/12/photos
2024-03-13 13:57:11,159 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 13:57:11,159 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 13:57:11,161 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/12/photos
2024-03-13 13:57:11,165 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] GET request for album with id 12
2024-03-13 13:57:11,167 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Get photos for album with id 12
2024-03-13 13:57:11,167 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Get posts for user with id 12
2024-03-13 13:57:11,177 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send request to https://jsonplaceholder.typicode.com/albums/12/photos
2024-03-13 13:57:11,237 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send result for request /albums/12/photos
2024-03-13 13:57:38,607 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 13:57:38,610 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 13:57:38,619 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
