2024-03-13 00:18:50,155 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:18:50,158 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:18:50,161 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:22:10,197 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:22:10,200 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:22:10,684 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:22:10,727 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
2024-03-13 00:22:11,080 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:22:11,086 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:22:11,087 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:22:11,087 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:22:11,139 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:22:11,139 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 909 ms
2024-03-13 00:22:11,243 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:22:11,275 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:22:11,380 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:22:11,460 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:22:11,463 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:22:11,678 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:22:11,680 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:22:11,719 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:22:12,221 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:22:12,227 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:22:12,370 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:22:12,428 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:22:12,476 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:22:12,510 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:22:12,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:22:12,701 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4dc16fc9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1028a747, org.springframework.security.web.context.SecurityContextHolderFilter@7ec75228, org.springframework.security.web.header.HeaderWriterFilter@3c1d6ef0, org.springframework.security.web.authentication.logout.LogoutFilter@3f919230, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@eda7dd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@8de8b07, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6c6c93f8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24890021, org.springframework.security.web.session.SessionManagementFilter@96448ee, org.springframework.security.web.access.ExceptionTranslationFilter@35217e0, org.springframework.security.web.access.intercept.AuthorizationFilter@1e487d57]
2024-03-13 00:22:12,803 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:22:12,842 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:22:12,854 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:22:12,859 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.936 seconds (process running for 3.528)
2024-03-13 00:22:36,357 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:22:36,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:22:36,359 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 00:22:36,365 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /posts/100
2024-03-13 00:22:36,847 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:22:36,848 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:22:36,857 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /posts/100
2024-03-13 00:22:36,868 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 00:22:36,872 INFO r.k.v.c.PostController [http-nio-8080-exec-2] GET request for post with id 100
2024-03-13 00:22:36,885 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 00:22:36,888 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Get post with id 100
2024-03-13 00:22:36,888 INFO r.k.v.s.PostService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/posts/100
2024-03-13 00:22:45,186 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /posts/100
2024-03-13 00:22:45,446 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:22:45,446 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:45,448 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:22:45,450 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:22:45,452 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:22:48,900 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:22:49,161 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:22:49,162 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:49,163 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:22:49,163 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /error
2024-03-13 00:22:49,164 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:22:52,327 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /albums/100
2024-03-13 00:22:52,588 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:22:52,589 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:22:52,590 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:22:52,590 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /error
2024-03-13 00:22:52,591 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:23:01,954 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:23:01,955 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:23:01,959 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:23:13,727 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 23644 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:23:13,729 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:23:14,144 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:23:14,184 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:23:14,534 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:23:14,540 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:23:14,541 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:23:14,541 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:23:14,593 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:23:14,594 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 834 ms
2024-03-13 00:23:14,700 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:23:14,731 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:23:14,834 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:23:14,914 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:23:14,917 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:23:15,136 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:23:15,138 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:23:15,180 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:23:15,694 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:23:15,700 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:23:15,843 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:23:15,911 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:23:15,956 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:23:16,007 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:23:16,075 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:23:16,222 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fe37d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1718de70, org.springframework.security.web.context.SecurityContextHolderFilter@4d359c69, org.springframework.security.web.header.HeaderWriterFilter@74ed7111, org.springframework.security.web.authentication.logout.LogoutFilter@35217e0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6c6c93f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71dfca65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c770b57, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bfc5296, org.springframework.security.web.session.SessionManagementFilter@43c3354, org.springframework.security.web.access.ExceptionTranslationFilter@45a05350, org.springframework.security.web.access.intercept.AuthorizationFilter@3f1d4ecf]
2024-03-13 00:23:16,337 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:23:16,374 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:23:16,390 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:23:16,395 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.909 seconds (process running for 3.44)
2024-03-13 00:23:17,753 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:23:17,753 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:23:17,754 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:23:17,759 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:23:18,198 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:23:18,199 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:23:18,210 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:23:18,212 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:23:18,214 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:23:19,414 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:23:19,676 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:23:19,676 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:23:19,677 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:23:19,678 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:23:19,679 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:24:36,040 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /albums/100
2024-03-13 00:24:36,303 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:24:36,303 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_VIEWER]]
2024-03-13 00:24:36,304 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-6] Responding with 403 status code
2024-03-13 00:24:36,304 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing GET /error
2024-03-13 00:24:36,305 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured GET /error
2024-03-13 00:25:38,510 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:25:38,512 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:25:38,517 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:25:43,286 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 24264 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:25:43,289 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:25:43,719 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:25:43,759 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:25:44,103 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:25:44,108 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:25:44,109 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:25:44,109 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:25:44,168 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:25:44,169 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 848 ms
2024-03-13 00:25:44,267 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:25:44,296 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:25:44,399 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:25:44,479 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:25:44,482 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:25:44,695 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 00:25:44,698 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:25:44,736 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:25:45,222 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:25:45,228 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:25:45,368 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:25:45,434 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:25:45,477 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:25:45,507 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:25:45,565 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:25:45,697 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33997e07, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@639bf405, org.springframework.security.web.context.SecurityContextHolderFilter@6164b3a2, org.springframework.security.web.header.HeaderWriterFilter@589a4305, org.springframework.security.web.authentication.logout.LogoutFilter@5b3c2a9f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@69e736bf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@96448ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@55cf5626, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@eda7dd3, org.springframework.security.web.session.SessionManagementFilter@3f1d4ecf, org.springframework.security.web.access.ExceptionTranslationFilter@1828ab51, org.springframework.security.web.access.intercept.AuthorizationFilter@54c17a2b]
2024-03-13 00:25:45,803 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:25:45,839 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:25:45,851 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:25:45,856 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.817 seconds (process running for 3.341)
2024-03-13 00:26:00,353 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:26:00,354 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:26:00,359 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:26:04,274 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19856 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:26:04,277 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:26:04,709 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:26:04,749 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:26:05,091 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:26:05,097 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:26:05,098 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:26:05,098 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:26:05,162 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:26:05,162 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 856 ms
2024-03-13 00:26:05,261 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:26:05,292 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:26:05,395 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:26:05,474 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:26:05,477 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:26:05,688 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:26:05,690 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:26:05,730 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:26:06,217 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:26:06,223 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:26:06,361 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:26:06,420 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:26:06,463 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:26:06,497 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:26:06,568 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:26:06,697 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@27422187, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7205a8b7, org.springframework.security.web.context.SecurityContextHolderFilter@3fc7abf6, org.springframework.security.web.header.HeaderWriterFilter@341c0dfc, org.springframework.security.web.authentication.logout.LogoutFilter@54c17a2b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1028a747, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c6c93f8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1718de70, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1ee126de, org.springframework.security.web.session.SessionManagementFilter@55cf5626, org.springframework.security.web.access.ExceptionTranslationFilter@3dd27116, org.springframework.security.web.access.intercept.AuthorizationFilter@304704ae]
2024-03-13 00:26:06,800 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:26:06,837 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:26:06,849 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:26:06,853 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.837 seconds (process running for 3.406)
2024-03-13 00:26:17,540 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:26:17,541 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:26:17,542 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:26:17,547 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:26:17,985 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:26:17,986 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:26:17,997 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:26:18,001 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:26:18,003 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /error
2024-03-13 00:26:21,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:26:21,276 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:26:21,277 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:26:21,278 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:26:21,278 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:26:21,280 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:27:06,611 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:27:06,871 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:27:06,871 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:27:06,871 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/100
2024-03-13 00:27:06,876 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:06,892 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:27:06,896 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:27:07,131 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:27:29,210 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:27:29,212 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:27:29,215 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:27:32,768 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 16348 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:27:32,770 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:27:33,195 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:27:33,237 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:27:33,589 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:27:33,598 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:27:33,662 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:27:33,663 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 860 ms
2024-03-13 00:27:33,764 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:27:33,794 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:27:33,898 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:27:33,981 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:27:33,984 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:27:34,198 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:27:34,199 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:27:34,238 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:27:34,726 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:27:34,731 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:27:34,878 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:27:34,941 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:34,986 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:27:35,025 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:27:35,079 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:27:35,205 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1da61a29, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47cf922d, org.springframework.security.web.context.SecurityContextHolderFilter@c770b57, org.springframework.security.web.header.HeaderWriterFilter@2daa5092, org.springframework.security.web.authentication.logout.LogoutFilter@341c0dfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41736818, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55731ccd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@565030b7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b64921f, org.springframework.security.web.session.SessionManagementFilter@7fa86ddd, org.springframework.security.web.access.ExceptionTranslationFilter@5478597, org.springframework.security.web.access.intercept.AuthorizationFilter@59509393]
2024-03-13 00:27:35,336 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:27:35,372 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:27:35,384 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:27:35,388 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.874 seconds (process running for 3.403)
2024-03-13 00:27:40,363 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:27:40,363 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:27:40,364 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:27:40,368 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:27:40,802 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:27:40,803 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:27:40,813 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:27:40,816 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /error
2024-03-13 00:27:40,818 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /error
2024-03-13 00:27:48,016 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:27:48,291 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:27:48,292 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:27:48,292 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:27:48,295 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:27:48,314 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:27:48,316 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:27:48,541 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:28:06,814 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing DELETE /albums/100
2024-03-13 00:28:07,081 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:28:07,081 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:28:07,082 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured DELETE /albums/100
2024-03-13 00:28:07,083 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] DELETE request for Album with id 100
2024-03-13 00:28:07,085 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Delete album with id 100
2024-03-13 00:28:07,085 INFO r.k.v.s.BaseService [http-nio-8080-exec-4] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:28:58,082 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:28:58,085 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:28:58,088 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:29:01,717 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 16232 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:29:01,720 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:29:02,157 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:29:02,195 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 33 ms. Found 2 JPA repository interfaces.
2024-03-13 00:29:02,543 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:29:02,548 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:02,549 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:29:02,549 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:29:02,602 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:29:02,602 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 850 ms
2024-03-13 00:29:02,700 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:29:02,729 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:29:02,835 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:29:02,913 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:29:02,917 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:29:03,129 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:29:03,130 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:29:03,169 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:29:03,651 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:29:03,657 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:03,795 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:29:03,849 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:03,896 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:29:03,931 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:29:03,990 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:29:04,120 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1fe37d27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1718de70, org.springframework.security.web.context.SecurityContextHolderFilter@4d359c69, org.springframework.security.web.header.HeaderWriterFilter@74ed7111, org.springframework.security.web.authentication.logout.LogoutFilter@35217e0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6c6c93f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71dfca65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c770b57, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6bfc5296, org.springframework.security.web.session.SessionManagementFilter@43c3354, org.springframework.security.web.access.ExceptionTranslationFilter@45a05350, org.springframework.security.web.access.intercept.AuthorizationFilter@3f1d4ecf]
2024-03-13 00:29:04,227 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:29:04,267 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:04,279 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:29:04,284 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.823 seconds (process running for 3.366)
2024-03-13 00:29:11,356 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:29:11,356 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:29:11,357 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:29:11,361 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/100
2024-03-13 00:29:11,807 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:29:11,808 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:11,818 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:29:11,820 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:29:11,822 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:29:19,350 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:19,351 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:29:19,357 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:29:23,283 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21836 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:29:23,285 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:29:23,735 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:29:23,779 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
2024-03-13 00:29:24,131 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:29:24,136 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:24,136 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:29:24,138 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:29:24,200 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:29:24,200 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 876 ms
2024-03-13 00:29:24,302 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:29:24,334 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:29:24,436 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:29:24,520 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:29:24,524 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:29:24,739 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@cae2a97
2024-03-13 00:29:24,740 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:29:24,778 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:29:25,325 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:29:25,331 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:29:25,473 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:29:25,527 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:25,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:29:25,606 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:29:25,663 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:29:25,788 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b64921f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@439d649c, org.springframework.security.web.context.SecurityContextHolderFilter@55731ccd, org.springframework.security.web.header.HeaderWriterFilter@66e62e19, org.springframework.security.web.authentication.logout.LogoutFilter@507fecf3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@144792d5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41935a9d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2eb31735, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e475994, org.springframework.security.web.session.SessionManagementFilter@3f465ae, org.springframework.security.web.access.ExceptionTranslationFilter@2daa5092, org.springframework.security.web.access.intercept.AuthorizationFilter@7ec75228]
2024-03-13 00:29:25,896 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:29:25,932 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:29:25,943 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:29:25,948 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.908 seconds (process running for 3.456)
2024-03-13 00:29:26,197 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:29:26,197 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:29:26,198 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:29:26,203 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /albums/100
2024-03-13 00:29:26,646 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:29:26,647 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:26,656 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-1] Responding with 403 status code
2024-03-13 00:29:26,660 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:29:26,661 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:29:35,145 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:29:35,410 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:29:35,411 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:29:35,412 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:29:35,414 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:29:35,431 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:29:35,433 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:29:35,667 INFO r.k.v.s.AlbumService [http-nio-8080-exec-3] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:29:38,917 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:29:39,188 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:29:39,189 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:29:39,189 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-4] Responding with 403 status code
2024-03-13 00:29:39,190 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /error
2024-03-13 00:29:39,191 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /error
2024-03-13 00:30:06,324 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /albums/100
2024-03-13 00:30:06,588 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:30:06,588 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:30:06,589 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-5] Responding with 403 status code
2024-03-13 00:30:06,589 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing GET /error
2024-03-13 00:30:06,590 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured GET /error
2024-03-13 00:30:17,546 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:17,547 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:30:17,552 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:30:21,306 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 14172 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:30:21,308 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:30:21,729 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:30:21,770 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:30:22,110 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:30:22,115 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:22,115 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:30:22,117 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:30:22,170 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:30:22,170 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 829 ms
2024-03-13 00:30:22,279 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:30:22,310 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:30:22,417 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:30:22,497 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:30:22,500 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:30:22,707 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:30:22,709 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:30:22,747 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:30:23,264 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:30:23,270 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:23,415 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:30:23,476 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:23,521 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:30:23,551 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:30:23,604 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:30:23,759 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1da61a29, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47cf922d, org.springframework.security.web.context.SecurityContextHolderFilter@c770b57, org.springframework.security.web.header.HeaderWriterFilter@2daa5092, org.springframework.security.web.authentication.logout.LogoutFilter@341c0dfc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41736818, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55731ccd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@565030b7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b64921f, org.springframework.security.web.session.SessionManagementFilter@7fa86ddd, org.springframework.security.web.access.ExceptionTranslationFilter@5478597, org.springframework.security.web.access.intercept.AuthorizationFilter@59509393]
2024-03-13 00:30:23,868 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:30:23,904 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:23,923 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:30:23,927 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.862 seconds (process running for 3.391)
2024-03-13 00:30:25,165 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:30:25,165 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:30:25,166 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2024-03-13 00:30:25,171 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:30:25,634 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:30:25,635 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:30:25,643 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:30:25,653 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:25,673 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:30:25,676 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:30:25,939 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:30:40,006 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:30:40,268 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:30:40,269 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:40,270 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:30:40,272 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:30:40,275 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:30:42,898 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:42,900 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:30:42,904 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:30:46,499 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21272 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:30:46,501 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:30:46,986 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:30:47,032 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 40 ms. Found 2 JPA repository interfaces.
2024-03-13 00:30:47,370 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:30:47,376 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:47,376 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:30:47,377 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:30:47,431 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:30:47,431 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 896 ms
2024-03-13 00:30:47,532 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:30:47,567 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:30:47,683 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:30:47,769 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:30:47,772 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:30:47,985 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:30:47,987 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:30:48,037 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:30:48,533 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:30:48,539 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:30:48,676 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:30:48,728 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:48,778 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:30:48,809 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:30:48,873 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:30:49,007 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24890021, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@613ba54e, org.springframework.security.web.context.SecurityContextHolderFilter@8de8b07, org.springframework.security.web.header.HeaderWriterFilter@3dd27116, org.springframework.security.web.authentication.logout.LogoutFilter@21251e43, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@71c69628, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fc7abf6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a720ae3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@27422187, org.springframework.security.web.session.SessionManagementFilter@1d6dc2b8, org.springframework.security.web.access.ExceptionTranslationFilter@3c1d6ef0, org.springframework.security.web.access.intercept.AuthorizationFilter@66c32e15]
2024-03-13 00:30:49,110 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:30:49,149 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:30:49,160 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:30:49,164 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.907 seconds (process running for 3.473)
2024-03-13 00:30:53,269 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:30:53,270 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:30:53,271 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:30:53,276 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:30:53,727 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:30:53,728 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:53,737 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:30:53,747 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:30:53,763 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:30:53,765 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:30:54,003 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:30:58,107 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /albums/100
2024-03-13 00:30:58,370 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:30:58,371 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:30:58,372 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:30:58,374 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /error
2024-03-13 00:30:58,376 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /error
2024-03-13 00:31:01,324 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/100
2024-03-13 00:31:01,587 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:31:01,587 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:01,587 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/100
2024-03-13 00:31:04,433 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /posts/-20
2024-03-13 00:31:04,700 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:31:04,700 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:31:04,701 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /posts/-20
2024-03-13 00:31:04,703 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.PostController
2024-03-13 00:31:04,704 INFO r.k.v.c.PostController [http-nio-8080-exec-5] DELETE request for post with id -20
2024-03-13 00:31:04,705 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.PostService
2024-03-13 00:31:04,705 INFO r.k.v.s.PostService [http-nio-8080-exec-5] Get post with id -20
2024-03-13 00:31:04,705 INFO r.k.v.s.PostService [http-nio-8080-exec-5] Send POST request to :https://jsonplaceholder.typicode.com/posts/-20
2024-03-13 00:31:04,828 ERROR r.k.v.s.PostService [http-nio-8080-exec-5] Error while searching for post with id -20: 404 Not Found: "{}"
2024-03-13 00:31:09,878 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /posts/20
2024-03-13 00:31:10,144 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:31:10,145 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:31:10,146 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /posts/20
2024-03-13 00:31:10,147 INFO r.k.v.c.PostController [http-nio-8080-exec-6] DELETE request for post with id 20
2024-03-13 00:31:10,147 INFO r.k.v.s.PostService [http-nio-8080-exec-6] Get post with id 20
2024-03-13 00:31:10,147 INFO r.k.v.s.PostService [http-nio-8080-exec-6] Send POST request to :https://jsonplaceholder.typicode.com/posts/20
2024-03-13 00:31:10,244 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Delete post with id 20
2024-03-13 00:31:10,244 INFO r.k.v.s.BaseService [http-nio-8080-exec-6] Send DELETE request to :https://jsonplaceholder.typicode.com/posts/20
2024-03-13 00:31:16,371 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing GET /albums/20
2024-03-13 00:31:16,631 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 00:31:16,632 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:16,633 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured GET /albums/20
2024-03-13 00:31:16,634 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 00:31:17,059 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] ALBUM: Optional[Album(userId=2, id=20, title=voluptas rerum iure ut enim)]
2024-03-13 00:31:18,090 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing GET /albums/20
2024-03-13 00:31:18,365 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:31:18,365 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:18,365 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured GET /albums/20
2024-03-13 00:31:19,999 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing GET /albums/20
2024-03-13 00:31:20,260 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:31:20,262 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:31:20,262 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured GET /albums/20
2024-03-13 00:31:28,002 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:31:28,003 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:31:28,008 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:33:58,064 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22416 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:33:58,067 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:33:58,494 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:33:58,542 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 41 ms. Found 2 JPA repository interfaces.
2024-03-13 00:33:58,903 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:33:58,910 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:33:58,911 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:33:58,911 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:33:58,969 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:33:58,969 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 869 ms
2024-03-13 00:33:59,066 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:33:59,097 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:33:59,199 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:33:59,276 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:33:59,280 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:33:59,505 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f471037
2024-03-13 00:33:59,506 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:33:59,545 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:34:00,033 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:34:00,039 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:34:00,178 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:34:00,257 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:34:00,299 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:34:00,333 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:34:00,396 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:34:00,528 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533a27f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7dd847a2, org.springframework.security.web.context.SecurityContextHolderFilter@341c0dfc, org.springframework.security.web.header.HeaderWriterFilter@22cf1808, org.springframework.security.web.authentication.logout.LogoutFilter@66d73e2d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6d387e9b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@507fecf3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6164b3a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75b25ec3, org.springframework.security.web.session.SessionManagementFilter@2e2c9e24, org.springframework.security.web.access.ExceptionTranslationFilter@279e85eb, org.springframework.security.web.access.intercept.AuthorizationFilter@c7cbc2d]
2024-03-13 00:34:00,636 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:34:00,672 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:34:00,684 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:34:00,689 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.921 seconds (process running for 3.453)
2024-03-13 00:34:03,696 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:34:03,696 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:34:03,697 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:34:03,702 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/20
2024-03-13 00:34:04,148 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:34:04,149 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:34:04,158 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/20
2024-03-13 00:34:04,169 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:34:04,187 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.service.AlbumService
2024-03-13 00:34:04,189 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] Send POST request to :https://jsonplaceholder.typicode.com/albums/20
2024-03-13 00:34:04,420 INFO r.k.v.s.AlbumService [http-nio-8080-exec-2] ALBUM: Optional[Album(userId=2, id=20, title=voluptas rerum iure ut enim)]
2024-03-13 00:34:11,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/1/photos
2024-03-13 00:34:11,285 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:34:11,285 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=posts, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_POSTS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_POSTS]]
2024-03-13 00:34:11,287 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-3] Responding with 403 status code
2024-03-13 00:34:11,290 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /error
2024-03-13 00:34:11,293 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /error
2024-03-13 00:34:20,085 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing GET /albums/1/photos
2024-03-13 00:34:20,346 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:34:20,347 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:20,348 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured GET /albums/1/photos
2024-03-13 00:34:20,349 INFO r.k.v.c.AlbumController [http-nio-8080-exec-4] GET request for album with id 1
2024-03-13 00:34:20,349 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send POST request to :https://jsonplaceholder.typicode.com/albums/1
2024-03-13 00:34:20,447 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] ALBUM: Optional[Album(userId=1, id=1, title=quidem molestiae enim)]
2024-03-13 00:34:20,448 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Get photos for album with id 1
2024-03-13 00:34:20,448 INFO r.k.v.s.AlbumService [http-nio-8080-exec-4] Send GET request to :https://jsonplaceholder.typicode.com/albums/1/photos
2024-03-13 00:34:43,986 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /album/20
2024-03-13 00:34:44,265 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:34:44,265 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:44,269 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /album/20
2024-03-13 00:34:44,272 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /error
2024-03-13 00:34:44,273 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /error
2024-03-13 00:34:49,396 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /album/10
2024-03-13 00:34:49,676 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:34:49,676 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:49,677 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /album/10
2024-03-13 00:34:49,680 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing DELETE /error
2024-03-13 00:34:49,681 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured DELETE /error
2024-03-13 00:34:53,125 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing DELETE /albums/10
2024-03-13 00:34:53,401 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 00:34:53,401 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:34:53,403 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured DELETE /albums/10
2024-03-13 00:34:53,404 INFO r.k.v.c.AlbumController [http-nio-8080-exec-7] DELETE request for Album with id 10
2024-03-13 00:34:53,405 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] Send POST request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 00:34:53,853 INFO r.k.v.s.AlbumService [http-nio-8080-exec-7] ALBUM: Optional[Album(userId=1, id=10, title=distinctio laborum qui)]
2024-03-13 00:34:53,854 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Delete album with id 10
2024-03-13 00:34:53,854 INFO r.k.v.s.BaseService [http-nio-8080-exec-7] Send DELETE request to :https://jsonplaceholder.typicode.com/albums/10
2024-03-13 00:35:00,481 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /albums
2024-03-13 00:35:00,752 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:35:00,752 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:35:00,753 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /albums
2024-03-13 00:35:00,761 INFO r.k.v.c.AlbumController [http-nio-8080-exec-8] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 00:35:00,763 INFO r.k.v.s.AlbumService [http-nio-8080-exec-8] Create album with id 0
2024-03-13 00:35:00,764 INFO r.k.v.s.AlbumService [http-nio-8080-exec-8] Send POST request to :https://jsonplaceholder.typicode.com/albums
2024-03-13 00:35:09,869 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing POST /albums
2024-03-13 00:35:10,129 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:35:10,130 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=albums, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS]]
2024-03-13 00:35:10,131 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured POST /albums
2024-03-13 00:35:10,131 INFO r.k.v.c.AlbumController [http-nio-8080-exec-9] Album request for Album Album(userId=1, id=0, title=New title)
2024-03-13 00:35:17,720 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /albums/100
2024-03-13 00:35:17,980 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-10] Authenticated user
2024-03-13 00:35:17,981 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:17,982 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl [http-nio-8080-exec-10] Responding with 403 status code
2024-03-13 00:35:17,982 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /error
2024-03-13 00:35:17,983 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /error
2024-03-13 00:35:21,180 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing GET /albums/100
2024-03-13 00:35:21,447 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:35:21,448 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:21,448 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured GET /albums/100
2024-03-13 00:35:21,449 INFO r.k.v.s.AlbumService [http-nio-8080-exec-1] Send POST request to :https://jsonplaceholder.typicode.com/albums/100
2024-03-13 00:35:21,552 INFO r.k.v.s.AlbumService [http-nio-8080-exec-1] ALBUM: Optional[Album(userId=10, id=100, title=enim repellat iste)]
2024-03-13 00:35:31,822 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing GET /albums/100
2024-03-13 00:35:32,082 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:35:32,082 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_VIEWER]]
2024-03-13 00:35:32,083 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured GET /albums/100
2024-03-13 00:35:40,582 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing GET /albums/100
2024-03-13 00:35:40,839 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:35:40,840 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=alb_viewer, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ALBUMS_VIEWER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ALBUMS_VIEWER]]
2024-03-13 00:35:40,840 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured GET /albums/100
2024-03-13 00:37:04,072 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:37:04,073 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:37:04,077 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:38:32,498 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21036 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:38:32,500 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:38:32,927 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:38:32,968 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:38:33,303 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:38:33,309 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:38:33,310 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:38:33,310 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:38:33,363 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:38:33,363 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 832 ms
2024-03-13 00:38:33,472 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:38:33,504 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:38:33,612 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:38:33,691 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:38:33,694 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:38:33,903 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7858d31d
2024-03-13 00:38:33,905 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:38:33,944 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:38:34,444 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:38:34,450 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:38:34,596 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:38:34,662 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:38:34,708 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:38:34,738 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:38:34,790 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:38:34,919 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@144792d5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1da61a29, org.springframework.security.web.context.SecurityContextHolderFilter@3f465ae, org.springframework.security.web.header.HeaderWriterFilter@39a1e1e6, org.springframework.security.web.authentication.logout.LogoutFilter@63218586, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bfc5296, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@308d4981, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b08d26f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47cf922d, org.springframework.security.web.session.SessionManagementFilter@71dfca65, org.springframework.security.web.access.ExceptionTranslationFilter@1abd1a28, org.springframework.security.web.access.intercept.AuthorizationFilter@96448ee]
2024-03-13 00:38:35,030 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:38:35,065 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:38:35,077 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:38:35,082 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.822 seconds (process running for 3.344)
2024-03-13 00:38:37,637 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:38:37,637 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:38:37,638 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:38:37,642 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /
2024-03-13 00:38:37,647 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:38:37,653 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:38:37,654 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@50fcb354
2024-03-13 00:38:37,656 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /error
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:38:37,661 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-2] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@50fcb354
2024-03-13 00:38:49,721 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /
2024-03-13 00:38:50,174 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:38:50,175 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:38:50,176 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /
2024-03-13 00:38:50,182 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /error
2024-03-13 00:38:50,183 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /error
2024-03-13 00:38:56,117 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /auth
2024-03-13 00:38:56,380 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:38:56,381 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:38:56,381 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /auth
2024-03-13 00:38:56,416 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] POST request for auth user ru.kduskov.vkapi.model.auth.User@8ad80ad
2024-03-13 00:38:56,421 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke "ru.kduskov.vkapi.repository.UserRepository.save(Object)" because "this.userRepository" is null] with root cause
java.lang.NullPointerException: Cannot invoke "ru.kduskov.vkapi.repository.UserRepository.save(Object)" because "this.userRepository" is null
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:32)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:38:56,424 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /error
2024-03-13 00:38:56,424 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /error
2024-03-13 00:39:16,160 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:39:16,162 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:39:16,166 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:39:19,582 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21544 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:39:19,584 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:39:20,021 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:39:20,061 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:39:20,425 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:39:20,433 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:39:20,433 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:39:20,434 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:39:20,497 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:39:20,498 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 881 ms
2024-03-13 00:39:20,615 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:39:20,650 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:39:20,756 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:39:20,845 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:39:20,848 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:39:21,080 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@782e6b40
2024-03-13 00:39:21,081 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:39:21,121 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:39:21,624 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:39:21,631 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:39:21,785 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:39:21,853 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:39:21,913 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:39:21,948 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:39:22,011 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:39:22,156 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@439d649c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e475994, org.springframework.security.web.context.SecurityContextHolderFilter@750adad8, org.springframework.security.web.header.HeaderWriterFilter@50fe5df2, org.springframework.security.web.authentication.logout.LogoutFilter@3f1d4ecf, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1da61a29, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b08d26f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@73753326, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55a2f08b, org.springframework.security.web.session.SessionManagementFilter@c770b57, org.springframework.security.web.access.ExceptionTranslationFilter@5f346355, org.springframework.security.web.access.intercept.AuthorizationFilter@55cf5626]
2024-03-13 00:39:22,266 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:39:22,303 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:39:22,315 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:39:22,319 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.987 seconds (process running for 3.518)
2024-03-13 00:39:23,066 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:39:23,066 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:39:23,067 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 00:39:23,072 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /auth
2024-03-13 00:39:23,527 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 00:39:23,528 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:39:23,536 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /auth
2024-03-13 00:39:23,597 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] POST request for auth user ru.kduskov.vkapi.model.auth.User@4b6664d5
2024-03-13 00:39:23,648 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] SQL Error: 1048, SQLState: 23000
2024-03-13 00:39:23,649 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-2] Column 'password' cannot be null
2024-03-13 00:39:23,657 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'password' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3587)
	at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3449)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3864)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:164)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:34)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:39:23,661 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /error
2024-03-13 00:39:23,663 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /error
2024-03-13 00:42:59,132 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:42:59,134 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:42:59,138 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:43:04,671 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 12796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:43:04,673 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:43:05,108 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:43:05,148 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:43:05,493 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:43:05,499 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:43:05,500 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:43:05,500 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:43:05,563 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:43:05,564 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 861 ms
2024-03-13 00:43:05,663 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:43:05,694 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:43:05,796 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:43:05,879 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:43:05,881 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:43:06,093 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 00:43:06,094 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:43:06,134 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:43:06,661 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:43:06,668 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:43:06,815 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:43:06,875 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:43:06,915 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:43:06,945 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:43:07,012 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:43:07,152 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@32084a01, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@66d73e2d, org.springframework.security.web.context.SecurityContextHolderFilter@752fecbf, org.springframework.security.web.header.HeaderWriterFilter@260fffec, org.springframework.security.web.authentication.logout.LogoutFilter@345af277, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6e475994, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73753326, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@423d662a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2433bcd4, org.springframework.security.web.session.SessionManagementFilter@41935a9d, org.springframework.security.web.access.ExceptionTranslationFilter@53fd59d4, org.springframework.security.web.access.intercept.AuthorizationFilter@1016b44e]
2024-03-13 00:43:07,255 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:43:07,291 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:43:07,303 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:43:07,308 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.9 seconds (process running for 3.443)
2024-03-13 00:44:51,309 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:51,310 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:44:51,315 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:44:55,393 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22748 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:44:55,395 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:44:55,837 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:44:55,877 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:44:56,215 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:44:56,221 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:44:56,276 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:44:56,276 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 852 ms
2024-03-13 00:44:56,383 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:44:56,414 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:44:56,517 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:44:56,596 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:44:56,599 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:44:56,824 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:44:56,825 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:44:56,865 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:44:57,366 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:44:57,372 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:57,516 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:44:57,576 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:44:57,624 WARN o.s.c.s.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userAuthController': Unsatisfied dependency expressed through field 'passwordEncoder': No qualifying bean of type 'org.springframework.security.crypto.password.PasswordEncoder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2024-03-13 00:44:57,624 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:44:57,626 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2024-03-13 00:44:57,630 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2024-03-13 00:44:57,632 INFO o.a.j.l.DirectJDKLog [main] Stopping service [Tomcat]
2024-03-13 00:44:57,638 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-03-13 00:44:57,656 ERROR o.s.b.d.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field passwordEncoder in ru.kduskov.vkapi.controllers.UserAuthController required a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'org.springframework.security.crypto.password.PasswordEncoder' in your configuration.

2024-03-13 00:45:55,695 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20028 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:45:55,697 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:45:56,143 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:45:56,184 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 00:45:56,527 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:45:56,534 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:45:56,596 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:45:56,596 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 859 ms
2024-03-13 00:45:56,696 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:45:56,726 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:45:56,834 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:45:56,912 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:45:56,915 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:45:57,124 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e50eeb9
2024-03-13 00:45:57,126 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:45:57,169 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:45:57,654 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:45:57,660 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:45:57,810 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:45:57,873 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:45:57,917 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:45:57,946 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:45:58,008 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:45:58,135 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b60d99c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@543a7605, org.springframework.security.web.context.SecurityContextHolderFilter@6bbac73d, org.springframework.security.web.header.HeaderWriterFilter@1828ab51, org.springframework.security.web.authentication.logout.LogoutFilter@5a08d301, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7dd847a2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6164b3a2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d6dc2b8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33997e07, org.springframework.security.web.session.SessionManagementFilter@7e0b68e5, org.springframework.security.web.access.ExceptionTranslationFilter@22349ad3, org.springframework.security.web.access.intercept.AuthorizationFilter@21251e43]
2024-03-13 00:45:58,237 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:45:58,273 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:45:58,286 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:45:58,290 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.861 seconds (process running for 3.466)
2024-03-13 00:46:02,858 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:46:02,859 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:46:02,859 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:46:02,864 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:46:03,093 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Failed to find user 'admin'
2024-03-13 00:46:03,094 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Failed to process authentication request
org.springframework.security.authentication.BadCredentialsException: Bad credentials
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:141)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:176)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:46:03,096 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:46:03,096 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3f499a2
2024-03-13 00:46:03,101 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /error
2024-03-13 00:46:03,102 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-03-13 00:46:03,112 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2024-03-13 00:46:03,113 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint [http-nio-8080-exec-1] No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3f499a2
2024-03-13 00:48:19,372 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing POST /auth
2024-03-13 00:48:19,646 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 00:48:19,647 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:48:19,648 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured POST /auth
2024-03-13 00:48:19,705 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] POST request for auth user ru.kduskov.vkapi.model.auth.User@70c6fd46
2024-03-13 00:49:52,870 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:49:52,872 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:49:52,876 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:50:28,832 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 22648 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:50:28,835 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:50:29,252 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:50:29,293 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 00:50:29,641 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:50:29,648 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:50:29,711 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:50:29,711 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 846 ms
2024-03-13 00:50:29,811 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:50:29,841 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:50:29,943 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:50:30,032 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:50:30,035 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:50:30,250 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e50eeb9
2024-03-13 00:50:30,251 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:50:30,290 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:50:30,774 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:50:30,780 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:50:30,922 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:50:30,988 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:50:31,038 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:50:31,068 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:50:31,125 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:50:31,258 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@543a7605, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33997e07, org.springframework.security.web.context.SecurityContextHolderFilter@4e53c6ef, org.springframework.security.web.header.HeaderWriterFilter@5e7ea81b, org.springframework.security.web.authentication.logout.LogoutFilter@63e40188, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@75b25ec3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@345af277, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7ec75228, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@639bf405, org.springframework.security.web.session.SessionManagementFilter@507fecf3, org.springframework.security.web.access.ExceptionTranslationFilter@42fdf45e, org.springframework.security.web.access.intercept.AuthorizationFilter@677274e7]
2024-03-13 00:50:31,361 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:50:31,399 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:50:31,412 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:50:31,416 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.841 seconds (process running for 3.344)
2024-03-13 00:50:38,368 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:50:38,368 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:50:38,368 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:50:38,374 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:50:38,808 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:50:38,809 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:50:38,816 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 00:50:38,877 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@305e6944
2024-03-13 00:53:15,527 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:53:15,529 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:53:15,533 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:53:19,279 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 20592 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:53:19,281 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:53:19,714 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:53:19,754 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:53:20,101 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:53:20,108 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:53:20,109 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:53:20,109 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:53:20,173 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:53:20,173 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 859 ms
2024-03-13 00:53:20,271 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:53:20,303 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:53:20,407 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:53:20,494 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:53:20,497 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:53:20,712 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6233c6c2
2024-03-13 00:53:20,714 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:53:20,752 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:53:21,317 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:53:21,323 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:53:21,477 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:53:21,543 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:53:21,603 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:53:21,635 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:53:21,687 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:53:21,812 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1828ab51, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e7ea81b, org.springframework.security.web.context.SecurityContextHolderFilter@e21d73, org.springframework.security.web.header.HeaderWriterFilter@1512efe9, org.springframework.security.web.authentication.logout.LogoutFilter@7fa86ddd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7156f8cf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@600b3bee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4db45d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@589a4305, org.springframework.security.web.session.SessionManagementFilter@55a5eea3, org.springframework.security.web.access.ExceptionTranslationFilter@67521a79, org.springframework.security.web.access.intercept.AuthorizationFilter@565030b7]
2024-03-13 00:53:21,931 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:53:21,970 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:53:21,983 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:53:21,987 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.949 seconds (process running for 3.491)
2024-03-13 00:53:24,658 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:53:24,658 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:53:24,659 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 00:53:24,664 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 00:53:25,106 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:53:25,107 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:53:25,114 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 00:53:25,176 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@1ae5b8cb
2024-03-13 00:53:25,282 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] SQL Error: 1048, SQLState: 23000
2024-03-13 00:53:25,282 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-1] Column 'role_id' cannot be null
2024-03-13 00:53:25,290 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'role_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:42)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3288)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3898)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:80)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:719)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307)
	at jdk.proxy2/jdk.proxy2.$Proxy104.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.create(UserAuthController.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:53:25,294 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /error
2024-03-13 00:53:25,296 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /error
2024-03-13 00:53:36,568 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /auth
2024-03-13 00:53:36,832 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 00:53:36,832 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:53:36,832 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /auth
2024-03-13 00:53:36,835 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-4] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `ru.kduskov.vkapi.model.auth.Role` (although at least one Creator exists): no int/Int-argument constructor/factory method to deserialize from Number value (1)]
2024-03-13 00:53:36,836 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing POST /error
2024-03-13 00:53:36,836 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured POST /error
2024-03-13 00:54:01,598 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /auth
2024-03-13 00:54:01,858 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 00:54:01,858 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:54:01,859 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /auth
2024-03-13 00:54:01,860 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8080-exec-6] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `ru.kduskov.vkapi.model.auth.Role` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('admin')]
2024-03-13 00:54:01,861 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /error
2024-03-13 00:54:01,861 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /error
2024-03-13 00:54:46,079 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /auth
2024-03-13 00:54:46,357 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 00:54:46,357 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:54:46,358 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /auth
2024-03-13 00:54:46,359 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] POST request for auth user ru.kduskov.vkapi.model.auth.User@b318120
2024-03-13 00:55:14,750 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing POST /auth
2024-03-13 00:55:15,028 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 00:55:15,029 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:55:15,030 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured POST /auth
2024-03-13 00:55:15,030 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-9] POST request for auth user ru.kduskov.vkapi.model.auth.User@5b011c66
2024-03-13 00:55:47,167 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /kir
2024-03-13 00:55:47,426 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-10] Authenticated user
2024-03-13 00:55:47,427 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-10] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:55:47,430 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /kir
2024-03-13 00:55:47,433 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Securing DELETE /error
2024-03-13 00:55:47,434 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-10] Secured DELETE /error
2024-03-13 00:56:41,581 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:56:41,584 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 00:56:41,588 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 00:59:03,517 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 6740 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 00:59:03,520 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 00:59:03,946 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 00:59:03,985 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 00:59:04,313 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 00:59:04,319 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 00:59:04,320 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 00:59:04,320 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 00:59:04,380 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 00:59:04,380 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 829 ms
2024-03-13 00:59:04,480 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 00:59:04,512 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 00:59:04,616 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 00:59:04,694 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 00:59:04,697 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 00:59:04,928 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 00:59:04,930 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 00:59:04,968 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 00:59:05,459 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 00:59:05,464 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 00:59:05,608 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 00:59:05,677 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 00:59:05,721 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 00:59:05,749 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 00:59:05,805 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 00:59:05,928 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71c69628, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4dc16fc9, org.springframework.security.web.context.SecurityContextHolderFilter@1d6dc2b8, org.springframework.security.web.header.HeaderWriterFilter@95aeee4, org.springframework.security.web.authentication.logout.LogoutFilter@36ae17ef, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@639bf405, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55cf5626, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1016b44e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1028a747, org.springframework.security.web.session.SessionManagementFilter@345af277, org.springframework.security.web.access.ExceptionTranslationFilter@28c75c93, org.springframework.security.web.access.intercept.AuthorizationFilter@3497ecea]
2024-03-13 00:59:06,036 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 00:59:06,073 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 00:59:06,086 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 00:59:06,091 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.823 seconds (process running for 3.348)
2024-03-13 00:59:09,538 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 00:59:09,539 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 00:59:09,540 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 00:59:09,544 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /kir
2024-03-13 00:59:09,978 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 00:59:09,979 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:59:09,987 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /kir
2024-03-13 00:59:09,997 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing DELETE /error
2024-03-13 00:59:09,999 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured DELETE /error
2024-03-13 00:59:34,844 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /auth/kir
2024-03-13 00:59:35,109 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 00:59:35,110 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 00:59:35,110 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /auth/kir
2024-03-13 00:59:35,112 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 00:59:35,119 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] DELETE request for auth user with username kir
2024-03-13 00:59:35,127 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-3] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.IncorrectResultSizeDataAccessException: query did not return a unique result: 2] with root cause
jakarta.persistence.NonUniqueResultException: query did not return a unique result: 2
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:128)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:466)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.getSingleResult(QuerySqmImpl.java:1062)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:193)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:148)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.findByUsername(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.delete(UserAuthController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 00:59:35,129 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing DELETE /error
2024-03-13 00:59:35,130 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured DELETE /error
2024-03-13 01:00:31,211 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:00:31,474 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:00:31,475 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:31,476 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:00:31,477 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:00:31,480 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] USER kir
2024-03-13 01:00:35,664 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing POST /auth
2024-03-13 01:00:35,932 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 01:00:35,933 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:35,933 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured POST /auth
2024-03-13 01:00:35,963 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-6] POST request for auth user ru.kduskov.vkapi.model.auth.User@3cbe877b
2024-03-13 01:00:37,284 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing POST /auth
2024-03-13 01:00:37,547 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 01:00:37,547 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:00:37,548 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured POST /auth
2024-03-13 01:00:37,550 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] POST request for auth user ru.kduskov.vkapi.model.auth.User@357c519
2024-03-13 01:04:32,851 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:04:32,852 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:04:32,857 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:04:36,275 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 13140 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:04:36,277 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:04:36,712 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:04:36,753 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:04:37,130 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:04:37,137 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:04:37,138 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:04:37,138 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:04:37,194 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:04:37,195 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 886 ms
2024-03-13 01:04:37,309 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:04:37,342 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:04:37,445 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:04:37,525 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:04:37,528 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:04:37,744 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@782e6b40
2024-03-13 01:04:37,746 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:04:37,785 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:04:38,284 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:04:38,291 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:04:38,436 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:04:38,501 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:04:38,547 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:04:38,577 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:04:38,644 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:04:38,776 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15a591d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5812935, org.springframework.security.web.context.SecurityContextHolderFilter@75d9b73c, org.springframework.security.web.header.HeaderWriterFilter@1718de70, org.springframework.security.web.authentication.logout.LogoutFilter@71c69628, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@542aec6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a08d301, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f571c0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71e9640, org.springframework.security.web.session.SessionManagementFilter@32084a01, org.springframework.security.web.access.ExceptionTranslationFilter@3a720ae3, org.springframework.security.web.access.intercept.AuthorizationFilter@14b4b25e]
2024-03-13 01:04:38,890 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:04:38,928 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:04:38,940 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:04:38,945 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.926 seconds (process running for 3.494)
2024-03-13 01:04:44,025 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:04:44,026 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:04:44,028 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 2 ms
2024-03-13 01:04:44,035 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing POST /auth
2024-03-13 01:04:44,471 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:04:44,472 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:04:44,480 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured POST /auth
2024-03-13 01:04:44,547 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] POST request for auth user ru.kduskov.vkapi.model.auth.User@47c5f053
2024-03-13 01:05:03,684 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing DELETE /auth/kir
2024-03-13 01:05:03,944 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 01:05:03,944 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:05:03,946 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured DELETE /auth/kir
2024-03-13 01:05:03,947 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-4] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:05:03,951 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] DELETE request for auth user with username kir
2024-03-13 01:05:11,388 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:05:11,648 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:05:11,648 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:05:11,650 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:05:11,651 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:06:34,256 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:06:34,257 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:06:34,262 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:06:37,915 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19772 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:06:37,916 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:06:38,349 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:06:38,390 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 01:06:38,759 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:06:38,765 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:06:38,766 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:06:38,766 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:06:38,834 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:06:38,835 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 884 ms
2024-03-13 01:06:38,992 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:06:39,043 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:06:39,152 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:06:39,239 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:06:39,242 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:06:39,461 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61dd1c3d
2024-03-13 01:06:39,463 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:06:39,508 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:06:40,033 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:06:40,039 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:06:40,195 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:06:40,262 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:06:40,312 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:06:40,345 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:06:40,407 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:06:40,539 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@54c17a2b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16279a5d, org.springframework.security.web.context.SecurityContextHolderFilter@1828ab51, org.springframework.security.web.header.HeaderWriterFilter@2eb31735, org.springframework.security.web.authentication.logout.LogoutFilter@41736818, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@48d14ea0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@589a4305, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@95aeee4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f7949dc, org.springframework.security.web.session.SessionManagementFilter@7156f8cf, org.springframework.security.web.access.ExceptionTranslationFilter@565030b7, org.springframework.security.web.access.intercept.AuthorizationFilter@1a99744a]
2024-03-13 01:06:40,651 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:06:40,688 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:06:40,701 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:06:40,706 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 3.049 seconds (process running for 3.61)
2024-03-13 01:06:41,020 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:06:41,020 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:06:41,021 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 1 ms
2024-03-13 01:06:41,027 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 01:06:41,500 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 01:06:41,501 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:41,511 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 01:06:41,583 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@261c9d5e
2024-03-13 01:06:43,694 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /auth
2024-03-13 01:06:43,956 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:06:43,956 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:43,957 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /auth
2024-03-13 01:06:43,958 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] POST request for auth user ru.kduskov.vkapi.model.auth.User@7cfa0abc
2024-03-13 01:06:47,140 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Securing DELETE /auth/kir
2024-03-13 01:06:47,401 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-5] Authenticated user
2024-03-13 01:06:47,401 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-5] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:06:47,402 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-5] Secured DELETE /auth/kir
2024-03-13 01:06:47,404 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-5] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:06:47,407 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-5] DELETE request for auth user with username kir
2024-03-13 01:07:01,073 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:07:01,074 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:07:01,081 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:09:31,174 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21104 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:09:31,177 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:09:31,616 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:09:31,657 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 36 ms. Found 2 JPA repository interfaces.
2024-03-13 01:09:32,012 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:09:32,019 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:09:32,019 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:09:32,020 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:09:32,086 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:09:32,087 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 877 ms
2024-03-13 01:09:32,195 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:09:32,229 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:09:32,335 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:09:32,413 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:09:32,416 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:09:32,639 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42211e04
2024-03-13 01:09:32,640 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:09:32,679 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:09:33,188 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:09:33,195 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:09:33,345 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:09:33,394 WARN o.s.c.s.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSecurityConfig': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
2024-03-13 01:09:33,394 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:09:33,396 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2024-03-13 01:09:33,400 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2024-03-13 01:09:33,402 INFO o.a.j.l.DirectJDKLog [main] Stopping service [Tomcat]
2024-03-13 01:09:33,409 INFO o.s.b.a.l.ConditionEvaluationReportLogger [main] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-03-13 01:09:33,422 ERROR o.s.b.SpringApplication [main] Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSecurityConfig': Unsatisfied dependency expressed through field 'userDetailsService': Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at ru.kduskov.vkapi.ApiApplication.main(ApiApplication.java:12)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 20 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:127)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 34 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in ru.kduskov.vkapi.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)
	... 48 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); Reason: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:229)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 58 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract ru.kduskov.vkapi.model.auth.User ru.kduskov.vkapi.repository.UserRepository.updateUserByUsername(java.lang.String,ru.kduskov.vkapi.model.auth.User); No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:96)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 70 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'updateUserByUsername' found for type 'User'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:423)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:399)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:352)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:334)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:317)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:242)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:243)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:372)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:1024)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:373)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:93)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:89)
	... 74 common frames omitted
2024-03-13 01:16:12,230 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 4460 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:16:12,232 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:16:12,654 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:16:12,694 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:16:13,033 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:16:13,040 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:16:13,096 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:16:13,097 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 833 ms
2024-03-13 01:16:13,201 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:16:13,231 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:16:13,335 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:16:13,414 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:16:13,417 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:16:13,630 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 01:16:13,632 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:16:13,670 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:16:14,164 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:16:14,170 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:16:14,318 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:16:14,385 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:16:14,427 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:16:14,456 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:16:14,505 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:16:14,647 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@535b4dbf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f571c0e, org.springframework.security.web.context.SecurityContextHolderFilter@4a249610, org.springframework.security.web.header.HeaderWriterFilter@c770b57, org.springframework.security.web.authentication.logout.LogoutFilter@3fc7abf6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5a08d301, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@279e85eb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22349ad3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@c7cbc2d, org.springframework.security.web.session.SessionManagementFilter@188b9a1e, org.springframework.security.web.access.ExceptionTranslationFilter@1e9f6095, org.springframework.security.web.access.intercept.AuthorizationFilter@457d3f54]
2024-03-13 01:16:14,764 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:16:14,814 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:16:14,818 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.829 seconds (process running for 3.353)
2024-03-13 01:16:14,826 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:16:14,828 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:16:14,833 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:17:13,080 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 19796 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:17:13,083 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:17:13,504 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:17:13,543 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 34 ms. Found 2 JPA repository interfaces.
2024-03-13 01:17:13,885 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:17:13,892 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:17:13,955 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:17:13,955 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 842 ms
2024-03-13 01:17:14,054 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:17:14,084 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:17:14,188 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:17:14,267 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:17:14,270 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:17:14,482 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34cb0e49
2024-03-13 01:17:14,484 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:17:14,522 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:17:15,003 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:17:15,009 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:17:15,150 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:17:15,210 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:17:15,255 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:17:15,284 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:17:15,347 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:17:15,475 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@28796d0e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3cc548f6, org.springframework.security.web.context.SecurityContextHolderFilter@41736818, org.springframework.security.web.header.HeaderWriterFilter@96448ee, org.springframework.security.web.authentication.logout.LogoutFilter@6d387e9b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4babe06f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@144792d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@439d649c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fed0c04, org.springframework.security.web.session.SessionManagementFilter@1fe37d27, org.springframework.security.web.access.ExceptionTranslationFilter@6164b3a2, org.springframework.security.web.access.intercept.AuthorizationFilter@33997e07]
2024-03-13 01:17:15,578 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:17:15,613 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:17:15,627 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:17:15,631 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.806 seconds (process running for 3.35)
2024-03-13 01:17:43,277 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:17:43,277 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:17:43,279 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 0 ms
2024-03-13 01:17:43,284 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /auth/12
2024-03-13 01:17:43,745 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:17:43,747 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:43,756 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /auth/12
2024-03-13 01:17:43,768 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:17:43,817 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] PUT request for auth user with id 12
2024-03-13 01:17:49,538 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing POST /auth
2024-03-13 01:17:49,799 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:17:49,800 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:49,801 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured POST /auth
2024-03-13 01:17:49,802 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] POST request for auth user ru.kduskov.vkapi.model.auth.User@291bc425
2024-03-13 01:17:55,368 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing PUT /auth/13
2024-03-13 01:17:55,629 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-4] Authenticated user
2024-03-13 01:17:55,630 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-4] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:17:55,631 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured PUT /auth/13
2024-03-13 01:17:55,633 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-4] PUT request for auth user with id 13
2024-03-13 01:17:55,670 WARN o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-4] SQL Error: 1048, SQLState: 23000
2024-03-13 01:17:55,670 ERROR o.h.e.j.s.SqlExceptionHelper [http-nio-8080-exec-4] Column 'role_id' cannot be null
2024-03-13 01:17:55,677 ERROR o.a.j.l.DirectJDKLog [http-nio-8080-exec-4] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]] with root cause
java.sql.SQLIntegrityConstraintViolationException: Column 'role_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3587)
	at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:3449)
	at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3864)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:164)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)
	at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:986)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy109.save(Unknown Source)
	at ru.kduskov.vkapi.controllers.UserAuthController.update(UserAuthController.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:917)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:734)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:202)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-03-13 01:17:55,682 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Securing PUT /error
2024-03-13 01:17:55,684 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-4] Secured PUT /error
2024-03-13 01:18:20,791 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Securing PUT /auth/13
2024-03-13 01:18:21,053 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-6] Authenticated user
2024-03-13 01:18:21,053 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-6] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:18:21,054 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-6] Secured PUT /auth/13
2024-03-13 01:18:21,055 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-6] PUT request for auth user with id 13
2024-03-13 01:19:02,801 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Securing POST /auth
2024-03-13 01:19:03,073 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-7] Authenticated user
2024-03-13 01:19:03,074 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-7] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:03,074 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-7] Secured POST /auth
2024-03-13 01:19:03,076 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-7] POST request for auth user ru.kduskov.vkapi.model.auth.User@5a322fb3
2024-03-13 01:19:25,790 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Securing PUT /auth/13
2024-03-13 01:19:26,066 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-8] Authenticated user
2024-03-13 01:19:26,066 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-8] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:26,068 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-8] Secured PUT /auth/13
2024-03-13 01:19:26,070 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-8] PUT request for auth user with id 13
2024-03-13 01:19:38,015 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Securing PUT /auth/14
2024-03-13 01:19:38,282 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-9] Authenticated user
2024-03-13 01:19:38,282 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-9] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:19:38,283 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-9] Secured PUT /auth/14
2024-03-13 01:19:38,284 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-9] PUT request for auth user with id 14
2024-03-13 01:20:04,744 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:04,745 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:20:04,751 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:20:08,101 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 21800 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:20:08,103 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:20:08,537 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:20:08,578 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:20:08,930 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:20:08,936 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:08,937 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:20:08,937 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:20:09,019 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:20:09,019 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 884 ms
2024-03-13 01:20:09,143 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:20:09,179 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:20:09,291 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:20:09,379 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:20:09,383 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:20:09,600 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32d0d7eb
2024-03-13 01:20:09,601 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:20:09,640 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:20:10,132 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:20:10,138 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:10,279 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:20:10,343 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:20:10,388 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:20:10,419 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:20:10,483 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:20:10,607 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15a591d9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5812935, org.springframework.security.web.context.SecurityContextHolderFilter@75d9b73c, org.springframework.security.web.header.HeaderWriterFilter@1718de70, org.springframework.security.web.authentication.logout.LogoutFilter@71c69628, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@542aec6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a08d301, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f571c0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@71e9640, org.springframework.security.web.session.SessionManagementFilter@32084a01, org.springframework.security.web.access.ExceptionTranslationFilter@3a720ae3, org.springframework.security.web.access.intercept.AuthorizationFilter@14b4b25e]
2024-03-13 01:20:10,716 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:20:10,752 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:10,765 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:20:10,769 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.917 seconds (process running for 3.468)
2024-03-13 01:20:13,781 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:20:13,782 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:20:13,782 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 0 ms
2024-03-13 01:20:13,786 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Securing POST /auth
2024-03-13 01:20:14,235 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-1] Authenticated user
2024-03-13 01:20:14,236 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-1] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:14,244 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-1] Secured POST /auth
2024-03-13 01:20:14,307 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-1] POST request for auth user ru.kduskov.vkapi.model.auth.User@467a3478
2024-03-13 01:20:20,233 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Securing PUT /auth/15
2024-03-13 01:20:20,496 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-3] Authenticated user
2024-03-13 01:20:20,497 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-3] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:20,499 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-3] Secured PUT /auth/15
2024-03-13 01:20:20,501 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:20:20,503 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-3] PUT request for auth user with id 15
2024-03-13 01:20:46,022 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:46,023 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:20:46,028 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-03-13 01:20:49,600 INFO o.s.b.StartupInfoLogger [main] Starting ApiApplication using Java 21.0.2 with PID 17292 (C:\Projects\IDEA\vk_api\target\classes started by KirBe in C:\Projects\IDEA\vk_api)
2024-03-13 01:20:49,602 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-03-13 01:20:50,045 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-13 01:20:50,085 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2024-03-13 01:20:50,455 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-03-13 01:20:50,461 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:50,462 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-03-13 01:20:50,462 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.1]
2024-03-13 01:20:50,532 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-03-13 01:20:50,532 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 899 ms
2024-03-13 01:20:50,647 INFO o.h.j.i.u.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-13 01:20:50,682 INFO o.h.Version [main] HHH000412: Hibernate ORM core version 6.1.5.Final
2024-03-13 01:20:50,782 WARN o.h.b.i.MetadataBuilderImpl$MetadataBuildingOptionsImpl [main] HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-03-13 01:20:50,859 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Starting...
2024-03-13 01:20:50,863 WARN c.z.h.u.DriverDataSource [main] Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2024-03-13 01:20:51,072 INFO c.z.h.p.HikariPool [main] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d8056bf
2024-03-13 01:20:51,074 INFO c.z.h.HikariDataSource [main] HikariPool-1 - Start completed.
2024-03-13 01:20:51,111 INFO o.h.e.j.d.i.DialectFactoryImpl [main] HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2024-03-13 01:20:51,599 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-13 01:20:51,604 INFO o.s.o.j.AbstractEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:20:51,743 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.UserRepository
2024-03-13 01:20:51,805 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.AlbumController
2024-03-13 01:20:51,850 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserController
2024-03-13 01:20:51,883 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-13 01:20:51,937 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.config.WebSecurityConfig
2024-03-13 01:20:52,066 INFO o.s.s.w.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f1a3c4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a08d301, org.springframework.security.web.context.SecurityContextHolderFilter@2eb73a42, org.springframework.security.web.header.HeaderWriterFilter@71dfca65, org.springframework.security.web.authentication.logout.LogoutFilter@7ec75228, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@66d73e2d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@423d662a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@279e85eb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63e40188, org.springframework.security.web.session.SessionManagementFilter@2eb31735, org.springframework.security.web.access.ExceptionTranslationFilter@4d359c69, org.springframework.security.web.access.intercept.AuthorizationFilter@1fe37d27]
2024-03-13 01:20:52,177 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.repository.RoleRepository
2024-03-13 01:20:52,221 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-03-13 01:20:52,234 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-03-13 01:20:52,239 INFO o.s.b.StartupInfoLogger [main] Started ApiApplication in 2.913 seconds (process running for 3.461)
2024-03-13 01:20:52,380 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-03-13 01:20:52,381 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Initializing Servlet 'dispatcherServlet'
2024-03-13 01:20:52,382 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-2] Completed initialization in 1 ms
2024-03-13 01:20:52,388 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Securing PUT /auth/15
2024-03-13 01:20:52,828 DEBUG o.s.s.a.d.AbstractUserDetailsAuthenticationProvider [http-nio-8080-exec-2] Authenticated user
2024-03-13 01:20:52,828 DEBUG o.s.s.w.a.w.BasicAuthenticationFilter [http-nio-8080-exec-2] Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=admin, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2024-03-13 01:20:52,837 DEBUG o.s.s.w.FilterChainProxy [http-nio-8080-exec-2] Secured PUT /auth/15
2024-03-13 01:20:52,849 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-2] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: ru.kduskov.vkapi.controllers.UserAuthController
2024-03-13 01:20:52,900 INFO r.k.v.c.UserAuthController [http-nio-8080-exec-2] PUT request for auth user with id 15
2024-03-13 01:24:55,466 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-13 01:24:55,467 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-03-13 01:24:55,472 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
